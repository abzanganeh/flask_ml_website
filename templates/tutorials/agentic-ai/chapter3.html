<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Tool-Using Agents - Agentic AI & LLM Agents</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/agentic-ai/agentic-ai.css') }}">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    <!-- Prism.js for code syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>


</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav">
            <div class="azbn-container">
                <a href="/tutorials/agentic-ai" class="course-link">
                    <span>Agentic AI & LLM Agents</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="tutorial-header">
            <div class="azbn-container">
                <h1 class="chapter-title">Chapter 3: Tool-Using Agents</h1>
                <p class="chapter-subtitle">Agents That Can Use Tools</p>
                
                <div class="chapter-progress">
                    <div class="chapter-progress-fill" data-progress="37"></div>
                </div>
                
                <div class="chapter-navigation">
                    <a href="/tutorials/agentic-ai/chapter1" class="chapter-nav-btn ">Chapter 1</a>
                    <a href="/tutorials/agentic-ai/chapter2" class="chapter-nav-btn ">Chapter 2</a>
                    <a href="/tutorials/agentic-ai/chapter3" class="chapter-nav-btn active">Chapter 3</a>
                    <a href="/tutorials/agentic-ai/chapter4" class="chapter-nav-btn ">Chapter 4</a>
                    <a href="/tutorials/agentic-ai/chapter5" class="chapter-nav-btn ">Chapter 5</a>
                    <a href="/tutorials/agentic-ai/chapter6" class="chapter-nav-btn ">Chapter 6</a>
                    <a href="/tutorials/agentic-ai/chapter7" class="chapter-nav-btn ">Chapter 7</a>
                    <a href="/tutorials/agentic-ai/chapter8" class="chapter-nav-btn ">Chapter 8</a>
                </div>
                
                <div class="section-progress">
                    <div class="section-progress-fill" data-progress="14.3"></div>
                </div>
                
                <div class="section-nav">
                    <button class="section-nav-btn azbn-btn active" data-section="overview">Overview</button>
                    <button class="section-nav-btn azbn-btn" data-section="concepts">Key Concepts</button>
                    <button class="section-nav-btn azbn-btn" data-section="formulas">Formulas</button>
                    <button class="section-nav-btn azbn-btn" data-section="examples">Examples</button>
                    <button class="section-nav-btn azbn-btn" data-section="implementation">Implementation</button>
                    <button class="section-nav-btn azbn-btn" data-section="applications">Applications</button>
                    <button class="section-nav-btn azbn-btn" data-section="quiz">Quiz</button>
                </div>
            </div>
        </div>

        <section class="azbn-section">
            <div class="azbn-container">
                <div class="learning-objectives-box">
                    <h2>Learning Objectives</h2>
                    <ul>
                        <li>Understand tool-using agents fundamentals</li>
                        <li>Master the mathematical foundations</li>
                        <li>Learn practical implementation</li>
                        <li>Apply knowledge through examples</li>
                        <li>Recognize real-world applications</li>
                    </ul>
                </div>

                <main class="chapter-main-content">
                    <div id="overview" class="content-section active">
                        <h2>Tool-Using Agents</h2>
                        
                        <div class="explanation-box">
                            <h3>What are Tool-Using Agents?</h3>
                            <p><strong>Tool-using agents can interact with external systems through function calls, APIs, and tools.</strong> This capability transforms agents from simple text generators into powerful autonomous systems that can affect the real world.</p>
                            
                            <p><strong>Think of tool-using agents like a Swiss Army knife:</strong></p>
                            <ul>
                                <li><strong>Traditional LLM:</strong> Like a single tool - can only generate text</li>
                                <li><strong>Tool-Using Agent:</strong> Like a multi-tool - can use different tools for different tasks</li>
                                <li><strong>Key advantage:</strong> Can access real-time data, perform calculations, interact with systems</li>
                            </ul>
                        </div>

                        <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border: 2px solid #0ea5e9; border-radius: 12px; padding: 2rem; margin: 2rem 0;">
                            <h4 style="color: #0c4a6e; margin-bottom: 1.5rem; text-align: center;">üîß Tool-Using Agent Architecture</h4>
                            
                            <div style="background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                <div style="text-align: center; margin-bottom: 1.5rem;">
                                    <div style="background: #dbeafe; border: 2px solid #3b82f6; border-radius: 8px; padding: 1rem; display: inline-block; min-width: 200px;">
                                        <p style="font-weight: 700; color: #1e40af; margin: 0;">User Request</p>
                                        <p style="font-size: 0.9rem; color: #1e40af; margin: 0.3rem 0 0 0;">"Get weather in NYC"</p>
                                    </div>
                                </div>
                                
                                <div style="text-align: center; margin: 1rem 0;">
                                    <div style="font-size: 1.5rem; color: #0ea5e9; font-weight: bold;">‚Üì</div>
                                </div>
                                
                                <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
                                    <p style="font-weight: 700; color: #166534; margin: 0 0 1rem 0; text-align: center;">üß† LLM Reasoning</p>
                                    <div style="background: white; padding: 1rem; border-radius: 6px; text-align: center;">
                                        <p style="font-size: 0.9rem; color: #166534; margin: 0;">Analyzes request ‚Üí Decides: "Need weather tool"</p>
                                    </div>
                                </div>
                                
                                <div style="text-align: center; margin: 1rem 0;">
                                    <div style="font-size: 1.5rem; color: #0ea5e9; font-weight: bold;">‚Üì</div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                                    <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem; text-align: center;">
                                        <p style="font-weight: 700; color: #991b1b; margin: 0 0 0.5rem 0; font-size: 0.9rem;">Tool 1</p>
                                        <p style="font-size: 0.8rem; color: #991b1b; margin: 0;">Weather API</p>
                                    </div>
                                    <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 1rem; text-align: center;">
                                        <p style="font-weight: 700; color: #92400e; margin: 0 0 0.5rem 0; font-size: 0.9rem;">Tool 2</p>
                                        <p style="font-size: 0.8rem; color: #92400e; margin: 0;">Calculator</p>
                                    </div>
                                    <div style="background: #e0e7ff; border: 2px solid #6366f1; border-radius: 8px; padding: 1rem; text-align: center;">
                                        <p style="font-weight: 700; color: #4338ca; margin: 0 0 0.5rem 0; font-size: 0.9rem;">Tool 3</p>
                                        <p style="font-size: 0.8rem; color: #4338ca; margin: 0;">Web Search</p>
                                    </div>
                                </div>
                                
                                <div style="text-align: center; margin: 1rem 0;">
                                    <div style="font-size: 1.5rem; color: #0ea5e9; font-weight: bold;">‚Üì</div>
                                </div>
                                
                                <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
                                    <p style="font-weight: 700; color: #991b1b; margin: 0 0 1rem 0; text-align: center;">‚ö° Tool Execution</p>
                                    <div style="background: white; padding: 1rem; border-radius: 6px; text-align: center;">
                                        <p style="font-size: 0.9rem; color: #991b1b; margin: 0;">Calls: get_weather("New York") ‚Üí Returns: "72¬∞F, sunny"</p>
                                    </div>
                                </div>
                                
                                <div style="text-align: center; margin: 1rem 0;">
                                    <div style="font-size: 1.5rem; color: #0ea5e9; font-weight: bold;">‚Üì</div>
                                </div>
                                
                                <div style="text-align: center;">
                                    <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; padding: 1rem; display: inline-block; min-width: 200px;">
                                        <p style="font-weight: 700; color: #166534; margin: 0;">Response</p>
                                        <p style="font-size: 0.9rem; color: #166534; margin: 0.3rem 0 0 0;">"Weather in NYC: 72¬∞F, sunny"</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h4>Why Tools Matter</h4>
                            <p><strong>Tools extend agent capabilities beyond text generation:</strong></p>
                            <ul>
                                <li><strong>Real-time data:</strong> Access current information (weather, stock prices, news)</li>
                                <li><strong>Computations:</strong> Perform calculations, data analysis</li>
                                <li><strong>System integration:</strong> Interact with databases, APIs, software systems</li>
                                <li><strong>Actions:</strong> Send emails, create files, update records</li>
                            </ul>
                        </div>
                    </div>

                    <div id="concepts" class="content-section">
                        <h2>Key Concepts</h2>
                        
                        <div class="explanation-box">
                            <h3>üîë Function Calling Mechanism</h3>
                            <p><strong>Function calling allows LLMs to request tool execution:</strong></p>
                            
                            <div class="example-box">
                                <h4>How Function Calling Works</h4>
                                <ol>
                                    <li><strong>Tool Definition:</strong> Define tools with name, description, and parameters</li>
                                    <li><strong>LLM Decision:</strong> LLM analyzes request and decides which tool to use</li>
                                    <li><strong>Function Call:</strong> LLM generates function call with parameters</li>
                                    <li><strong>Tool Execution:</strong> System executes the function</li>
                                    <li><strong>Result Integration:</strong> Tool result is fed back to LLM</li>
                                    <li><strong>Response Generation:</strong> LLM generates final response using tool result</li>
                                </ol>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); border: 2px solid #ef4444; border-radius: 12px; padding: 2rem; margin: 1.5rem 0;">
                                <h4 style="color: #991b1b; margin-bottom: 1.5rem; text-align: center;">üîß Function Calling Flow Diagram</h4>
                                
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem;">
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #dbeafe; border: 2px solid #3b82f6; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #1e40af; margin: 0; font-size: 0.9rem;">1. Tool Def</p>
                                                <p style="font-size: 0.8rem; color: #1e40af; margin: 0.3rem 0 0 0;">Define tools</p>
                                            </div>
                                        </div>
                                        <div style="font-size: 1.5rem; color: #ef4444;">‚Üí</div>
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #166534; margin: 0; font-size: 0.9rem;">2. LLM Select</p>
                                                <p style="font-size: 0.8rem; color: #166534; margin: 0.3rem 0 0 0;">Choose tool</p>
                                            </div>
                                        </div>
                                        <div style="font-size: 1.5rem; color: #ef4444;">‚Üí</div>
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #991b1b; margin: 0; font-size: 0.9rem;">3. Execute</p>
                                                <p style="font-size: 0.8rem; color: #991b1b; margin: 0.3rem 0 0 0;">Run function</p>
                                            </div>
                                        </div>
                                        <div style="font-size: 1.5rem; color: #ef4444;">‚Üí</div>
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #92400e; margin: 0; font-size: 0.9rem;">4. Response</p>
                                                <p style="font-size: 0.8rem; color: #92400e; margin: 0.3rem 0 0 0;">Generate answer</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h3>Tool Definition Schema</h3>
                            <p><strong>Tools must be properly defined for LLMs to understand and use them:</strong></p>
                            
                            <div class="example-box">
                                <h4>Tool Schema Components</h4>
                                <ul>
                                    <li><strong>name:</strong> Unique identifier for the tool</li>
                                    <li><strong>description:</strong> What the tool does (critical for LLM selection!)</li>
                                    <li><strong>parameters:</strong> Input parameters with types and descriptions</li>
                                    <li><strong>returns:</strong> What the tool returns</li>
                                </ul>
                            </div>
                            
                            <div class="code-box">
                                <h4>Example Tool Definition</h4>
                                <pre><code class="language-python">{
    "name": "get_weather",
    "description": "Get current weather for a specific city",
    "parameters": {
        "type": "object",
        "properties": {
            "city": {
                "type": "string",
                "description": "The city name, e.g., 'New York'"
            },
            "units": {
                "type": "string",
                "enum": ["celsius", "fahrenheit"],
                "description": "Temperature units"
            }
        },
        "required": ["city"]
    },
    "returns": {
        "type": "object",
        "properties": {
            "temperature": {"type": "number"},
            "condition": {"type": "string"},
            "humidity": {"type": "number"}
        }
    }
}</code></pre>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h3>Tool Selection Process</h3>
                            <p><strong>The LLM selects tools based on task requirements:</strong></p>
                            
                            <div class="example-box">
                                <h4>Selection Criteria</h4>
                                <ul>
                                    <li><strong>Task match:</strong> Does tool description match the task?</li>
                                    <li><strong>Parameter availability:</strong> Can we provide required parameters?</li>
                                    <li><strong>Relevance:</strong> Is this the best tool for the job?</li>
                                </ul>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid #22c55e; border-radius: 12px; padding: 2rem; margin: 1.5rem 0;">
                                <h4 style="color: #14532d; margin-bottom: 1.5rem; text-align: center;">Tool Selection Decision Tree</h4>
                                
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div style="text-align: center; margin-bottom: 1rem;">
                                        <div style="background: #dbeafe; border: 2px solid #3b82f6; border-radius: 8px; padding: 1rem; display: inline-block;">
                                            <p style="font-weight: 700; color: #1e40af; margin: 0;">User Request</p>
                                        </div>
                                    </div>
                                    
                                    <div style="text-align: center; margin: 1rem 0;">
                                        <div style="font-size: 1.5rem; color: #22c55e; font-weight: bold;">‚Üì</div>
                                    </div>
                                    
                                    <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem;">
                                        <p style="font-weight: 700; color: #92400e; margin: 0 0 1rem 0; text-align: center;">LLM Analyzes Request</p>
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                                            <div style="background: white; padding: 0.8rem; border-radius: 6px; text-align: center;">
                                                <p style="font-size: 0.8rem; color: #92400e; margin: 0;">Weather?</p>
                                            </div>
                                            <div style="background: white; padding: 0.8rem; border-radius: 6px; text-align: center;">
                                                <p style="font-size: 0.8rem; color: #92400e; margin: 0;">Calculate?</p>
                                            </div>
                                            <div style="background: white; padding: 0.8rem; border-radius: 6px; text-align: center;">
                                                <p style="font-size: 0.8rem; color: #92400e; margin: 0;">Search?</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div style="text-align: center; margin: 1rem 0;">
                                        <div style="font-size: 1.5rem; color: #22c55e; font-weight: bold;">‚Üì</div>
                                    </div>
                                    
                                    <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1.5rem;">
                                        <p style="font-weight: 700; color: #991b1b; margin: 0 0 1rem 0; text-align: center;">Selected Tool</p>
                                        <div style="background: white; padding: 1rem; border-radius: 6px; text-align: center;">
                                            <p style="font-size: 0.9rem; color: #991b1b; margin: 0;">get_weather(city="New York")</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h3>‚öôÔ∏è Error Handling in Tool Usage</h3>
                            <p><strong>Agents must handle tool execution errors gracefully:</strong></p>
                            
                            <div class="example-box">
                                <h4>Common Error Scenarios</h4>
                                <ul>
                                    <li><strong>Tool not found:</strong> Requested tool doesn't exist</li>
                                    <li><strong>Invalid parameters:</strong> Wrong parameter types or missing required params</li>
                                    <li><strong>Tool failure:</strong> Tool execution fails (API error, network issue)</li>
                                    <li><strong>Timeout:</strong> Tool takes too long to execute</li>
                                </ul>
                            </div>
                            
                            <div class="example-box">
                                <h4>Error Handling Strategies</h4>
                                <ul>
                                    <li><strong>Retry:</strong> Retry failed operations (with backoff)</li>
                                    <li><strong>Fallback:</strong> Use alternative tool or approach</li>
                                    <li><strong>Clarification:</strong> Ask user for more information</li>
                                    <li><strong>Graceful degradation:</strong> Provide partial answer if possible</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="formulas" class="content-section">
                        <h2>Mathematical Formulations</h2>
                        
                        <div class="formula-box">
                            <h4>Tool Selection Probability</h4>
                            
                            <div class="formula-display">
                                \[P(\text{tool} = t \mid \text{request}, \text{available\_tools}) = \text{softmax}(\text{similarity}(\text{request}, \text{tool.description}))\]
                            </div>
                            
                            <div class="formula-explanation">
                                <h5>LLM selects tool based on similarity:</h5>
                                <ul>
                                    <li><strong>request:</strong> User's request</li>
                                    <li><strong>tool.description:</strong> Tool description</li>
                                    <li><strong>similarity(...):</strong> Semantic similarity score</li>
                                    <li><strong>softmax:</strong> Converts scores to probabilities</li>
                                </ul>
                            </div>
                        </div>

                        <div class="formula-box">
                            <h4>Tool Execution Function</h4>
                            
                            <div class="formula-display">
                                \[\text{result} = \text{Execute}(\text{tool}, \text{parameters}) = \begin{cases} \text{success}: \text{tool}(\text{params}) \\ \text{error}: \text{None} \end{cases}\]
                            </div>
                            
                            <div class="formula-explanation">
                                <h5>Tool execution returns:</h5>
                                <ul>
                                    <li><strong>success:</strong> Tool result if execution succeeds</li>
                                    <li><strong>error:</strong> Error message if execution fails</li>
                                </ul>
                            </div>
                        </div>

                        <div class="formula-box">
                            <h4>Tool Result Integration</h4>
                            
                            <div class="formula-display">
                                \[\text{response} = \text{LLM}(\text{request}, \text{tool\_result}, \text{context})\]
                            </div>
                            
                            <div class="formula-explanation">
                                <h5>LLM generates response using:</h5>
                                <ul>
                                    <li><strong>request:</strong> Original user request</li>
                                    <li><strong>tool_result:</strong> Result from tool execution</li>
                                    <li><strong>context:</strong> Conversation context and memory</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="examples" class="content-section">
                        <h2>Detailed Examples</h2>
                        
                        <div class="example-box">
                            <h4>Example 1: Weather Agent - Complete Tool Usage</h4>
                            <p><strong>Task: "What's the weather in New York and Paris?"</strong></p>
                            
                            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border: 2px solid #0ea5e9; border-radius: 12px; padding: 2rem; margin: 1.5rem 0;">
                                <h4 style="color: #0c4a6e; margin-bottom: 1.5rem; text-align: center;">Multi-Tool Execution Flow</h4>
                                
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: #f3f4f6;">
                                                <th style="padding: 0.8rem; text-align: left; border: 1px solid #d1d5db; color: #374151; font-weight: 600;">Step</th>
                                                <th style="padding: 0.8rem; text-align: left; border: 1px solid #d1d5db; color: #374151; font-weight: 600;">Action</th>
                                                <th style="padding: 0.8rem; text-align: left; border: 1px solid #d1d5db; color: #374151; font-weight: 600;">Tool Call</th>
                                                <th style="padding: 0.8rem; text-align: left; border: 1px solid #d1d5db; color: #374151; font-weight: 600;">Result</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; font-weight: 600; color: #1e40af;">1</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">LLM analyzes request</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">-</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #166534;">Decides: Need 2 weather calls</td>
                                            </tr>
                                            <tr style="background: #f9fafb;">
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; font-weight: 600; color: #1e40af;">2</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">Call weather tool</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #991b1b; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">get_weather("New York")</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #166534;">72¬∞F, sunny</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; font-weight: 600; color: #1e40af;">3</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">Call weather tool</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #991b1b; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem;">get_weather("Paris")</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #166534;">65¬∞F, cloudy</td>
                                            </tr>
                                            <tr style="background: #f9fafb;">
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; font-weight: 600; color: #1e40af;">4</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">LLM generates response</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #374151;">-</td>
                                                <td style="padding: 0.8rem; border: 1px solid #d1d5db; color: #166534;">"NYC: 72¬∞F sunny, Paris: 65¬∞F cloudy"</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="example-box">
                            <h4>Example 2: Calculator Agent - Tool Chaining</h4>
                            <p><strong>Task: "Calculate (15 + 27) √ó 3 and convert to binary"</strong></p>
                            
                            <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid #22c55e; border-radius: 12px; padding: 2rem; margin: 1.5rem 0;">
                                <h4 style="color: #14532d; margin-bottom: 1.5rem; text-align: center;">üîó Tool Chaining Example</h4>
                                
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 1.5rem; margin-bottom: 1.5rem;">
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #991b1b; margin: 0; font-size: 0.9rem;">Step 1</p>
                                                <p style="font-size: 0.85rem; color: #991b1b; margin: 0.3rem 0 0 0;">calculate("15+27")</p>
                                                <p style="font-size: 0.8rem; color: #166534; margin: 0.3rem 0 0 0; font-weight: 600;">‚Üí 42</p>
                                            </div>
                                        </div>
                                        
                                        <div style="font-size: 2rem; color: #22c55e; font-weight: bold;">‚Üí</div>
                                        
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #991b1b; margin: 0; font-size: 0.9rem;">Step 2</p>
                                                <p style="font-size: 0.85rem; color: #991b1b; margin: 0.3rem 0 0 0;">calculate("42*3")</p>
                                                <p style="font-size: 0.8rem; color: #166534; margin: 0.3rem 0 0 0; font-weight: 600;">‚Üí 126</p>
                                            </div>
                                        </div>
                                        
                                        <div style="font-size: 2rem; color: #22c55e; font-weight: bold;">‚Üí</div>
                                        
                                        <div style="text-align: center; flex: 1; min-width: 150px;">
                                            <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem;">
                                                <p style="font-weight: 700; color: #991b1b; margin: 0; font-size: 0.9rem;">Step 3</p>
                                                <p style="font-size: 0.85rem; color: #991b1b; margin: 0.3rem 0 0 0;">convert_to_binary(126)</p>
                                                <p style="font-size: 0.8rem; color: #166534; margin: 0.3rem 0 0 0; font-weight: 600;">‚Üí "1111110"</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div style="background: #f0f9ff; border-left: 4px solid #0ea5e9; padding: 1rem; border-radius: 4px;">
                                        <p style="margin: 0; color: #0c4a6e; font-size: 0.9rem;"><strong>Key:</strong> Agent chains multiple tools, using output of one tool as input to the next!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="implementation" class="content-section">
                        <h2>Implementation</h2>
                        
                        <div class="code-box">
                            <h4>Complete Tool-Using Agent Implementation</h4>
                            <pre><code class="language-python">from typing import Dict, List, Any, Callable
import json
from enum import Enum

class ToolExecutionStatus(Enum):
    SUCCESS = "success"
    ERROR = "error"
    TIMEOUT = "timeout"

class ToolUsingAgent:
    """Agent that can use tools to interact with external systems"""
    
    def __init__(self, llm):
        self.llm = llm
        self.tools: Dict[str, Dict] = {}
        self.tool_execution_history = []
    
    def register_tool(self, name: str, description: str, function: Callable, 
                     parameters: Dict, returns: Dict = None):
        """
        Register a tool for the agent to use
        
        Parameters:
        name: Tool name
        description: What the tool does (critical for LLM selection!)
        function: Python function to execute
        parameters: Parameter schema
        returns: Return type schema
        """
        self.tools[name] = {
            'name': name,
            'description': description,
            'function': function,
            'parameters': parameters,
            'returns': returns
        }
    
    def get_tool_descriptions(self) -> str:
        """Get formatted tool descriptions for LLM"""
        descriptions = []
        for tool in self.tools.values():
            desc = f"- {tool['name']}: {tool['description']}"
            if tool['parameters']:
                params = ', '.join(tool['parameters'].keys())
                desc += f" (parameters: {params})"
            descriptions.append(desc)
        return '\n'.join(descriptions)
    
    def select_tool(self, user_request: str) -> Dict:
        """
        Use LLM to select appropriate tool
        
        Returns:
        Dict with tool name and parameters
        """
        tool_descriptions = self.get_tool_descriptions()
        
        prompt = f"""
        User request: {user_request}
        
        Available tools:
        {tool_descriptions}
        
        Select the most appropriate tool and parameters.
        Return JSON: {% raw %}{{"tool": "tool_name", "parameters": {"param": "value"}}}{% endraw %}
        """
        
        response = self.llm.generate(prompt)
        decision = json.loads(response)
        return decision
    
    def execute_tool(self, tool_name: str, parameters: Dict) -> Dict:
        """
        Execute a tool
        
        Returns:
        Dict with status and result/error
        """
        if tool_name not in self.tools:
            return {
                'status': ToolExecutionStatus.ERROR,
                'error': f'Tool {tool_name} not found',
                'result': None
            }
        
        tool = self.tools[tool_name]
        func = tool['function']
        
        try:
            # Execute tool
            result = func(**parameters)
            
            execution_record = {
                'tool': tool_name,
                'parameters': parameters,
                'status': ToolExecutionStatus.SUCCESS,
                'result': result,
                'timestamp': datetime.now().isoformat()
            }
            self.tool_execution_history.append(execution_record)
            
            return {
                'status': ToolExecutionStatus.SUCCESS,
                'result': result,
                'error': None
            }
        
        except Exception as e:
            execution_record = {
                'tool': tool_name,
                'parameters': parameters,
                'status': ToolExecutionStatus.ERROR,
                'error': str(e),
                'timestamp': datetime.now().isoformat()
            }
            self.tool_execution_history.append(execution_record)
            
            return {
                'status': ToolExecutionStatus.ERROR,
                'result': None,
                'error': str(e)
            }
    
    def process_with_tools(self, user_request: str, max_iterations: int = 5) -> str:
        """
        Process user request using tools
        
        Parameters:
        user_request: User's request
        max_iterations: Maximum tool calls allowed
        
        Returns:
        Final response
        """
        context = []
        
        for iteration in range(max_iterations):
            # Step 1: Select tool
            decision = self.select_tool(user_request)
            tool_name = decision.get('tool')
            parameters = decision.get('parameters', {})
            
            if not tool_name or tool_name == 'respond':
                # LLM decided to respond directly
                prompt = f"""
                User request: {user_request}
                Context: {json.dumps(context, indent=2)}
                
                Generate a response.
                """
                response = self.llm.generate(prompt)
                return response
            
            # Step 2: Execute tool
            execution_result = self.execute_tool(tool_name, parameters)
            context.append({
                'tool': tool_name,
                'result': execution_result
            })
            
            # Step 3: Check if we have enough information
            if execution_result['status'] == ToolExecutionStatus.SUCCESS:
                # Generate response using tool result
                prompt = f"""
                User request: {user_request}
                Tool result: {json.dumps(execution_result['result'], indent=2)}
                
                Generate a response using the tool result.
                """
                response = self.llm.generate(prompt)
                return response
            else:
                # Tool failed, try again or ask for clarification
                user_request = f"Tool {tool_name} failed: {execution_result['error']}. Please try a different approach."
                continue
        
        return "Agent reached maximum iterations without completing the task."

# Example tools
def get_weather(city: str) -> Dict:
    """Get weather for a city"""
    # In real implementation, call weather API
    return {"temperature": 72, "condition": "sunny", "city": city}

def calculate(expression: str) -> float:
    """Calculate mathematical expression"""
    try:
        return eval(expression)
    except:
        raise ValueError(f"Invalid expression: {expression}")

# Example usage
# agent = ToolUsingAgent(llm=my_llm)

# Register tools
# agent.register_tool(
#     name='get_weather',
#     description='Get current weather for a city',
#     function=get_weather,
#     parameters={'city': 'string'}
# )

# agent.register_tool(
#     name='calculate',
#     description='Calculate a mathematical expression',
#     function=calculate,
#     parameters={'expression': 'string'}
# )

# Process request
# response = agent.process_with_tools("What's the weather in New York?")
# print(response)</code></pre>
                        </div>

                        <div class="code-box">
                            <h4>Error Handling in Tool Execution</h4>
                            <pre><code class="language-python">class RobustToolExecutor:
    """Tool executor with error handling and retry logic"""
    
    def __init__(self, max_retries: int = 3, retry_delay: float = 1.0):
        self.max_retries = max_retries
        self.retry_delay = retry_delay
    
    def execute_with_retry(self, tool_func: Callable, parameters: Dict) -> Dict:
        """
        Execute tool with retry logic
        
        Parameters:
        tool_func: Tool function to execute
        parameters: Parameters for the function
        
        Returns:
        Execution result with status
        """
        last_error = None
        
        for attempt in range(self.max_retries):
            try:
                result = tool_func(**parameters)
                return {
                    'success': True,
                    'result': result,
                    'attempts': attempt + 1
                }
            except Exception as e:
                last_error = e
                if attempt < self.max_retries - 1:
                    time.sleep(self.retry_delay * (attempt + 1))  # Exponential backoff
                    continue
        
        # All retries failed
        return {
            'success': False,
            'error': str(last_error),
            'attempts': self.max_retries
        }
    
    def execute_with_fallback(self, primary_tool: Callable, fallback_tool: Callable,
                              parameters: Dict) -> Dict:
        """
        Execute tool with fallback
        
        Parameters:
        primary_tool: Primary tool to try
        fallback_tool: Fallback tool if primary fails
        parameters: Parameters for tools
        
        Returns:
        Execution result
        """
        # Try primary tool
        result = self.execute_with_retry(primary_tool, parameters)
        
        if result['success']:
            return result
        
        # Primary failed, try fallback
        print(f"Primary tool failed, trying fallback...")
        fallback_result = self.execute_with_retry(fallback_tool, parameters)
        
        if fallback_result['success']:
            fallback_result['used_fallback'] = True
            return fallback_result
        
        # Both failed
        return {
            'success': False,
            'error': f"Both primary and fallback tools failed",
            'primary_error': result.get('error'),
            'fallback_error': fallback_result.get('error')
        }

# Example usage
# executor = RobustToolExecutor(max_retries=3)
# result = executor.execute_with_retry(get_weather, {'city': 'New York'})
# print(result)</code></pre>
                        </div>
                    </div>

                    <div id="applications" class="content-section">
                        <h2>Real-World Applications</h2>
                        
                        <div class="explanation-box">
                            <h3>üåç Tool-Using Agents in Production</h3>
                            <p><strong>Tool-using agents power many real-world applications:</strong></p>
                            
                            <div class="example-box">
                                <h4>1. Customer Support Agents</h4>
                                <ul>
                                    <li><strong>Tools:</strong> Order database, CRM system, knowledge base</li>
                                    <li><strong>Use cases:</strong> Check order status, process returns, answer questions</li>
                                    <li><strong>Example:</strong> "Check my order #12345" ‚Üí Agent calls order_lookup tool</li>
                                </ul>
                            </div>
                            
                            <div class="example-box">
                                <h4>2. Research Agents</h4>
                                <ul>
                                    <li><strong>Tools:</strong> Web search, academic databases, PDF readers</li>
                                    <li><strong>Use cases:</strong> Research topics, gather information, cite sources</li>
                                    <li><strong>Example:</strong> "Research quantum computing" ‚Üí Agent uses search and read tools</li>
                                </ul>
                            </div>
                            
                            <div class="example-box">
                                <h4>3. Data Analysis Agents</h4>
                                <ul>
                                    <li><strong>Tools:</strong> Database connectors, statistical libraries, visualization tools</li>
                                    <li><strong>Use cases:</strong> Query data, analyze trends, create charts</li>
                                    <li><strong>Example:</strong> "Analyze sales data" ‚Üí Agent queries DB, runs analysis, creates visualizations</li>
                                </ul>
                            </div>
                            
                            <div class="example-box">
                                <h4>4. Code Generation Agents</h4>
                                <ul>
                                    <li><strong>Tools:</strong> Code editor, compiler, test runner, git</li>
                                    <li><strong>Use cases:</strong> Write code, run tests, commit changes</li>
                                    <li><strong>Example:</strong> "Create a REST API" ‚Üí Agent writes code, tests it, commits to git</li>
                                </ul>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h3>Tool Categories</h3>
                            <div style="background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%); border: 2px solid #22c55e; border-radius: 12px; padding: 2rem; margin: 1.5rem 0;">
                                <h4 style="color: #14532d; margin-bottom: 1.5rem; text-align: center;">Common Tool Categories</h4>
                                
                                <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                                        <div style="background: #fee2e2; border: 2px solid #ef4444; border-radius: 8px; padding: 1rem;">
                                            <p style="font-weight: 700; color: #991b1b; margin: 0 0 0.5rem 0;">üåê Information Tools</p>
                                            <ul style="color: #991b1b; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                                                <li>Web search</li>
                                                <li>Database queries</li>
                                                <li>API calls</li>
                                            </ul>
                                        </div>
                                        
                                        <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; padding: 1rem;">
                                            <p style="font-weight: 700; color: #92400e; margin: 0 0 0.5rem 0;">üî¢ Computation Tools</p>
                                            <ul style="color: #92400e; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                                                <li>Calculator</li>
                                                <li>Data analysis</li>
                                                <li>Statistical functions</li>
                                            </ul>
                                        </div>
                                        
                                        <div style="background: #dbeafe; border: 2px solid #3b82f6; border-radius: 8px; padding: 1rem;">
                                            <p style="font-weight: 700; color: #1e40af; margin: 0 0 0.5rem 0;">üíº Business Tools</p>
                                            <ul style="color: #1e40af; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                                                <li>CRM systems</li>
                                                <li>Email systems</li>
                                                <li>Calendar APIs</li>
                                            </ul>
                                        </div>
                                        
                                        <div style="background: #e0e7ff; border: 2px solid #6366f1; border-radius: 8px; padding: 1rem;">
                                            <p style="font-weight: 700; color: #4338ca; margin: 0 0 0.5rem 0;">Development Tools</p>
                                            <ul style="color: #4338ca; margin: 0; padding-left: 1.5rem; font-size: 0.9rem;">
                                                <li>Code editors</li>
                                                <li>Version control</li>
                                                <li>Build systems</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="quiz" class="content-section">
                        <h2>Test Your Understanding</h2>
                        
                        <div class="quiz-container">
                            <div class="quiz-question">
                                <h3>Question 1: What is the key advantage of tool-using agents over traditional LLMs?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) They can interact with external systems, access real-time data, and perform actions</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) They are faster</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) They use less memory</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) They have more parameters</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 2: What information is critical for LLM tool selection?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Tool description - LLM uses it to match tools to tasks</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Tool name only</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Tool code</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Tool file location</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 3: What should an agent do when a tool execution fails?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Retry with backoff, try fallback tool, or ask for clarification</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Give up immediately</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Ignore the error</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Use a random tool</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 4: Interview question: "How would you design a tool interface that allows an agent to select from 100+ tools efficiently?"</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Use semantic search/embedding similarity to filter relevant tools, then LLM selects from top-k candidates, with tool descriptions and parameter schemas</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Try all tools sequentially</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Randomly select tools</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Use only the first 10 tools</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 5: In the formula P(tool = t | request, available_tools) = softmax(similarity(...)), what does softmax do?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">A) Finds the maximum similarity</div>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">B) Converts similarity scores into a probability distribution over tools</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Sorts tools by similarity</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Filters out low similarity tools</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 6: What is function calling in the context of tool-using agents?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) A mechanism where LLMs can request to call external functions/tools with specific parameters, typically using structured output (JSON)</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Calling Python functions directly</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Function overloading</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Recursive function calls</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 7: Interview question: "How do you handle tool parameter validation and type checking?"</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Define parameter schemas (JSON Schema), validate types and constraints before execution, provide clear error messages, and use LLM to correct invalid parameters</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Don't validate, just execute</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Only check parameter count</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Validate after execution</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 8: What is the difference between synchronous and asynchronous tool execution?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Synchronous blocks until completion, asynchronous allows agent to continue processing while tool executes in background</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Synchronous is faster</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Asynchronous is simpler</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) There is no difference</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 9: Interview question: "How would you implement tool result caching to improve agent performance?"</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Cache tool results with key based on tool name + parameter hash, implement TTL, invalidate on data updates, use for idempotent operations</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Cache everything forever</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Never cache</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Cache only tool names</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 10: What information should be included in a tool description for optimal LLM selection?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Clear description of what the tool does, when to use it, required parameters with types and constraints, example use cases</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Just the tool name</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Only the code</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Tool file path</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 11: In the tool execution function result = Execute(tool, parameters), what should happen if parameters are invalid?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Return error status with descriptive message, allow LLM to correct and retry</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Execute anyway</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Use default parameters</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Skip the tool</div>
                            </div>
                            
                            <div class="quiz-question" style="margin-top: 2rem;">
                                <h3>Question 12: Interview question: "How do you handle rate limiting when agents make multiple tool calls?"</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Implement exponential backoff, respect rate limit headers, queue requests, prioritize critical tools, batch when possible</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Ignore rate limits</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Stop after first rate limit</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Make all calls simultaneously</div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </section>
    </main>

    <footer style="background: #f8f9fa; padding: 2rem 0; margin-top: 3rem; border-top: 2px solid #5B7553;">
        <div class="azbn-container" style="text-align: center;">
            <button onclick="scrollToSectionNav()" class="azbn-btn" style="margin: 0.5rem;">
                ‚Üë Back to Section Navigation
            </button>
            <div style="margin-top: 1.5rem;">
                <a href="/tutorials/agentic-ai" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Back to Tutorial</a>
                <a href="/tutorials/agentic-ai/chapter2" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Chapter 2</a>
                <a href="/tutorials/agentic-ai/chapter4" class="azbn-btn" style="text-decoration: none; margin: 0.5rem;">Chapter 4 ‚Üí</a>
            </div>
        </div>
    </footer>
    
        <!-- KaTeX for math rendering -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/tutorials/agentic-ai/shared-tutorial.js') }}"></script>
    <script>
        function scrollToSectionNav() {
            const sectionNav = document.querySelector('.section-nav');
            if (sectionNav) {
                sectionNav.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        function checkAnswer(element, isCorrect) {
            element.parentNode.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            if (isCorrect) {
                element.classList.add('correct');
                element.textContent += ' ‚úì Correct!';
            } else {
                element.classList.add('incorrect');
                element.textContent += ' ‚úó Incorrect';
                const correctOption = Array.from(element.parentNode.querySelectorAll('.quiz-option'))
                    .find(opt => {
                        const onclick = opt.getAttribute('onclick') || '';
                        return onclick.includes('true');
                    });
                if (correctOption && !correctOption.classList.contains('incorrect')) {
                    correctOption.classList.add('correct');
                    correctOption.textContent += ' ‚úì Correct Answer';
                }
            }
        }
            
// Initialize KaTeX rendering - ensure KaTeX is loaded first
        function initKaTeX() {
            if (typeof katex !== 'undefined' && typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "\\[", right: "\\]", display: true},
                        {left: "$", right: "$", display: false},
                        {left: "\\(", right: "\\)", display: false}
                    ],
                    throwOnError: false
                });
            } else {
                // Retry if KaTeX not loaded yet
                setTimeout(initKaTeX, 100);
                return;
            }
            
            // Initialize Prism.js syntax highlighting
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        }
        
        // Wait for DOM and KaTeX to be ready
        if (document.readyState === 'loading') {
            document.addEventListener("DOMContentLoaded", initKaTeX);
        } else {
            // DOM already loaded, wait for KaTeX
            initKaTeX();
            }
            
            // Initialize Prism.js syntax highlighting
            if (typeof Prism !== \'undefined\') {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>