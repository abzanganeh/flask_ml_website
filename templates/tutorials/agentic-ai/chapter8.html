<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 8: Building Production Agents - Agentic AI & LLM Agents</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/agentic-ai/agentic-ai.css') }}">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    <!-- Prism.js for code syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>


</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav">
            <div class="azbn-container">
                <a href="/tutorials/agentic-ai" class="course-link">
                    <span>Agentic AI & LLM Agents</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="tutorial-header">
            <div class="azbn-container">
                <h1 class="chapter-title">Chapter 8: Building Production Agents</h1>
                <p class="chapter-subtitle">Real-World Deployment</p>
                
                <div class="chapter-progress">
                    <div class="chapter-progress-fill" data-progress="100"></div>
                </div>
                
                <div class="chapter-navigation">
                    <a href="/tutorials/agentic-ai/chapter1" class="chapter-nav-btn ">Chapter 1</a>
                    <a href="/tutorials/agentic-ai/chapter2" class="chapter-nav-btn ">Chapter 2</a>
                    <a href="/tutorials/agentic-ai/chapter3" class="chapter-nav-btn ">Chapter 3</a>
                    <a href="/tutorials/agentic-ai/chapter4" class="chapter-nav-btn ">Chapter 4</a>
                    <a href="/tutorials/agentic-ai/chapter5" class="chapter-nav-btn ">Chapter 5</a>
                    <a href="/tutorials/agentic-ai/chapter6" class="chapter-nav-btn ">Chapter 6</a>
                    <a href="/tutorials/agentic-ai/chapter7" class="chapter-nav-btn ">Chapter 7</a>
                    <a href="/tutorials/agentic-ai/chapter8" class="chapter-nav-btn active">Chapter 8</a>
                </div>
                
                <div class="section-progress">
                    <div class="section-progress-fill" data-progress="14.3"></div>
                </div>
                
                <div class="section-nav">
                    <button class="section-nav-btn azbn-btn active" data-section="overview">Overview</button>
                    <button class="section-nav-btn azbn-btn" data-section="concepts">Key Concepts</button>
                    <button class="section-nav-btn azbn-btn" data-section="formulas">Formulas</button>
                    <button class="section-nav-btn azbn-btn" data-section="examples">Examples</button>
                    <button class="section-nav-btn azbn-btn" data-section="implementation">Implementation</button>
                    <button class="section-nav-btn azbn-btn" data-section="applications">Applications</button>
                    <button class="section-nav-btn azbn-btn" data-section="quiz">Quiz</button>
                </div>
            </div>
        </div>

        <section class="azbn-section">
            <div class="azbn-container">
                <div class="learning-objectives-box">
                    <h2>Learning Objectives</h2>
                    <ul>
                        <li>Understand building production agents fundamentals</li>
                        <li>Master the mathematical foundations</li>
                        <li>Learn practical implementation</li>
                        <li>Apply knowledge through examples</li>
                        <li>Recognize real-world applications</li>
                    </ul>
                </div>

                <main class="chapter-main-content">
                    <div id="overview" class="content-section active">
                        <h2>Building Production Agents</h2>
                        
                        <div class="explanation-box">
                            <h3>Introduction</h3>
                            <p><strong>Real-World Deployment</strong></p>
                            <p>This chapter provides comprehensive coverage of building production agents, including detailed explanations, mathematical formulations, code implementations, and real-world examples.</p>
                        </div>

                        <div class="example-box">
                            <h4>üìö Why This Matters</h4>
                            <p>Understanding building production agents is crucial for mastering modern AI systems. This chapter breaks down complex concepts into digestible explanations with step-by-step examples.</p>
                        </div>
                    </div>

                    <div id="concepts" class="content-section">
                        <h2>Key Concepts</h2>
                        
                        <div class="explanation-box">
                            <h3>Production Agent Considerations</h3>
                            <p><strong>Reliability:</strong></p>
                            <ul>
                                <li>Error handling and recovery</li>
                                <li>Retry mechanisms</li>
                                <li>Fallback strategies</li>
                                <li>Graceful degradation</li>
                            </ul>
                            
                            <p><strong>Scalability:</strong></p>
                            <ul>
                                <li>Handle concurrent requests</li>
                                <li>Load balancing</li>
                                <li>Resource management</li>
                                <li>Horizontal scaling</li>
                            </ul>
                            
                            <p><strong>Security:</strong></p>
                            <ul>
                                <li>Input validation</li>
                                <li>Output sanitization</li>
                                <li>Access control</li>
                                <li>Rate limiting</li>
                            </ul>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Deployment Patterns</h3>
                            <p><strong>API-based:</strong> Agent exposed as REST API, clients send requests</p>
                            <p><strong>Event-driven:</strong> Agent reacts to events (webhooks, message queues)</p>
                            <p><strong>Batch processing:</strong> Agent processes batches of tasks</p>
                            <p><strong>Streaming:</strong> Agent processes continuous data streams</p>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Best Practices</h3>
                            <p><strong>Monitoring:</strong> Comprehensive logging, metrics, alerts</p>
                            <p><strong>Testing:</strong> Unit tests, integration tests, end-to-end tests</p>
                            <p><strong>Documentation:</strong> API docs, agent capabilities, usage examples</p>
                            <p><strong>Versioning:</strong> Track agent versions, support rollbacks</p>
                        </div>
                    </div>

                    <div id="formulas" class="content-section">
                        <h2>Mathematical Formulations</h2>
                        
                        <div class="formula-box">
                            <h4>System Availability</h4>
                            <div class="formula-display">
                                \[\text{Availability} = \frac{\text{Uptime}}{\text{Uptime} + \text{Downtime}} \times 100\%\]
                            </div>
                            <div class="formula-explanation">
                                <p>Measures system reliability. Target: 99.9%+ for production systems.</p>
                            </div>
                        </div>
                        
                        <div class="formula-box">
                            <h4>Throughput</h4>
                            <div class="formula-display">
                                \[\text{Throughput} = \frac{\text{Completed Tasks}}{\text{Time Period}}\]
                            </div>
                            <div class="formula-explanation">
                                <p>Tasks processed per unit time. Higher throughput = better scalability.</p>
                            </div>
                        </div>
                        
                        <div class="formula-box">
                            <h4>Error Rate</h4>
                            <div class="formula-display">
                                \[\text{Error Rate} = \frac{\text{Failed Requests}}{\text{Total Requests}} \times 100\%\]
                            </div>
                            <div class="formula-explanation">
                                <p>Percentage of requests that fail. Lower is better. Target: <1% for production.</p>
                            </div>
                        </div>
                    </div>

                    <div id="examples" class="content-section">
                        <h2>Detailed Examples</h2>
                        
                        <div class="example-box">
                            <h4>Example: Production Agent Deployment</h4>
                            <p><strong>Architecture:</strong></p>
                            <ul>
                                <li>API Gateway: Routes requests to agent instances</li>
                                <li>Load Balancer: Distributes load across instances</li>
                                <li>Agent Instances: Multiple agent replicas for scalability</li>
                                <li>Database: Stores agent state and history</li>
                                <li>Monitoring: Tracks metrics and alerts</li>
                            </ul>
                            
                            <p><strong>Flow:</strong></p>
                            <ol>
                                <li>Client sends request to API Gateway</li>
                                <li>Load balancer routes to available agent instance</li>
                                <li>Agent processes request</li>
                                <li>Results stored in database</li>
                                <li>Metrics logged to monitoring system</li>
                                <li>Response returned to client</li>
                            </ol>
                        </div>
                        
                        <div class="example-box">
                            <h4>Example: Error Handling</h4>
                            <p><strong>Scenario:</strong> Agent tool call fails</p>
                            
                            <p><strong>Retry strategy:</strong></p>
                            <ul>
                                <li>Attempt 1: Immediate retry</li>
                                <li>Attempt 2: Retry after 1 second</li>
                                <li>Attempt 3: Retry after 3 seconds</li>
                                <li>After 3 failures: Use fallback tool or return error</li>
                            </ul>
                            
                            <p><strong>Fallback:</strong> If primary tool fails, agent uses alternative tool or returns graceful error message.</p>
                        </div>
                    </div>

                    <div id="implementation" class="content-section">
                        <h2>Implementation</h2>
                        
                        <div class="code-box">
                            <h4>Production Agent with Error Handling</h4>
                            <pre><code class="language-python">import time
from typing import Optional, Dict, Any
import logging

class ProductionAgent:
    """Production-ready agent with error handling"""
    
    def __init__(self, max_retries=3, timeout=30):
        self.max_retries = max_retries
        self.timeout = timeout
        self.logger = logging.getLogger(__name__)
    
    def execute_with_retry(self, task: str) -> Dict[str, Any]:
        """Execute task with retry logic"""
        for attempt in range(self.max_retries):
            try:
                result = self.execute(task)
                return {
                    'success': True,
                    'result': result,
                    'attempt': attempt + 1
                }
            except TimeoutError:
                self.logger.warning(f"Timeout on attempt {attempt + 1}")
                if attempt < self.max_retries - 1:
                    time.sleep(2 ** attempt)  # Exponential backoff
                else:
                    return self._fallback_response(task)
            except Exception as e:
                self.logger.error(f"Error on attempt {attempt + 1}: {e}")
                if attempt < self.max_retries - 1:
                    time.sleep(1)
                else:
                    return {
                        'success': False,
                        'error': str(e),
                        'fallback': self._fallback_response(task)
                    }
        
        return {'success': False, 'error': 'Max retries exceeded'}
    
    def execute(self, task: str):
        """Execute task (implemented by subclass)"""
        raise NotImplementedError
    
    def _fallback_response(self, task: str):
        """Fallback when all retries fail"""
        return {
            'success': False,
            'message': f"I encountered an error processing: {task}. Please try again or rephrase your request."
        }

# Example usage
class MyAgent(ProductionAgent):
    def execute(self, task):
        # Agent logic here
        return f"Processed: {task}"

agent = MyAgent()
result = agent.execute_with_retry("Your task here")</code></pre>
                        </div>
                        
                        <div class="code-box">
                            <h4>Agent API Endpoint (Flask)</h4>
                            <pre><code class="language-python">from flask import Flask, request, jsonify
from agent import ProductionAgent

app = Flask(__name__)
agent = ProductionAgent()

@app.route('/api/agent/execute', methods=['POST'])
def execute_agent():
    """API endpoint for agent execution"""
    try:
        data = request.json
        task = data.get('task')
        
        if not task:
            return jsonify({'error': 'Task required'}), 400
        
        # Execute with rate limiting, validation, etc.
        result = agent.execute_with_retry(task)
        
        return jsonify(result), 200
        
    except Exception as e:
        return jsonify({'error': str(e)}), 500

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)</code></pre>
                        </div>
                    </div>

                    <div id="applications" class="content-section">
                        <h2>Real-World Applications</h2>
                        
                        <div class="explanation-box">
                            <h3>Production Agent Deployments</h3>
                            <p><strong>Customer service:</strong></p>
                            <ul>
                                <li>24/7 support agents handling customer inquiries</li>
                                <li>Scalable to handle peak traffic</li>
                                <li>Integrated with CRM and knowledge bases</li>
                            </ul>
                            
                            <p><strong>Content generation:</strong></p>
                            <ul>
                                <li>Automated content creation at scale</li>
                                <li>Quality assurance and review workflows</li>
                                <li>Multi-language support</li>
                            </ul>
                            
                            <p><strong>Data processing:</strong></p>
                            <ul>
                                <li>Automated data extraction and analysis</li>
                                <li>Batch processing of large datasets</li>
                                <li>Real-time data pipeline agents</li>
                            </ul>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Production Best Practices</h3>
                            <p><strong>Infrastructure:</strong> Use cloud services, containerization, auto-scaling</p>
                            <p><strong>Monitoring:</strong> Comprehensive logging, metrics dashboards, alerting</p>
                            <p><strong>Testing:</strong> Automated testing, staging environments, gradual rollouts</p>
                            <p><strong>Documentation:</strong> API documentation, runbooks, troubleshooting guides</p>
                        </div>
                    </div>

                    <div id="quiz" class="content-section">
                        <h2>Test Your Understanding</h2>
                        
                        <div class="quiz-container">
                            <div class="quiz-question">
                                <h3>Question 1: What is the main concept covered in this chapter?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Building Production Agents</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Related concept</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Different topic</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Unrelated topic</div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </section>
    </main>

    <footer style="background: #f8f9fa; padding: 2rem 0; margin-top: 3rem; border-top: 2px solid #5B7553;">
        <div class="azbn-container" style="text-align: center;">
            <button onclick="scrollToSectionNav()" class="azbn-btn" style="margin: 0.5rem;">
                ‚Üë Back to Section Navigation
            </button>
            <div style="margin-top: 1.5rem;">
                <a href="/tutorials/agentic-ai" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Back to Tutorial</a>
                <a href="/tutorials/agentic-ai/chapter7" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Chapter 7</a>
                
            </div>
        </div>
    </footer>
    
        <!-- KaTeX for math rendering -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/tutorials/agentic-ai/shared-tutorial.js') }}"></script>
    <script>
        function scrollToSectionNav() {
            const sectionNav = document.querySelector('.section-nav');
            if (sectionNav) {
                sectionNav.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        function checkAnswer(element, isCorrect) {
            element.parentNode.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            if (isCorrect) {
                element.classList.add('correct');
                element.textContent += ' ‚úì Correct!';
            } else {
                element.classList.add('incorrect');
                element.textContent += ' ‚úó Incorrect';
                const correctOption = Array.from(element.parentNode.querySelectorAll('.quiz-option'))
                    .find(opt => {
                        const onclick = opt.getAttribute('onclick') || '';
                        return onclick.includes('true');
                    });
                if (correctOption && !correctOption.classList.contains('incorrect')) {
                    correctOption.classList.add('correct');
                    correctOption.textContent += ' ‚úì Correct Answer';
                }
            }
        }
            
// Initialize KaTeX rendering - ensure KaTeX is loaded first
        function initKaTeX() {
            if (typeof katex !== 'undefined' && typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "\\[", right: "\\]", display: true},
                        {left: "$", right: "$", display: false},
                        {left: "\\(", right: "\\)", display: false}
                    ],
                    throwOnError: false
                });
            } else {
                // Retry if KaTeX not loaded yet
                setTimeout(initKaTeX, 100);
                return;
            }
            
            // Initialize Prism.js syntax highlighting
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        }
        
        // Wait for DOM and KaTeX to be ready
        if (document.readyState === 'loading') {
            document.addEventListener("DOMContentLoaded", initKaTeX);
        } else {
            // DOM already loaded, wait for KaTeX
            initKaTeX();
            }
            
            // Initialize Prism.js syntax highlighting
            if (typeof Prism !== \'undefined\') {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>