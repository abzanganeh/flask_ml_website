<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: K-means Clustering - Comprehensive Clustering Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/clustering/clustering.css') }}">
    
    <script src="{{ url_for('static', filename='js/tutorials/clustering/shared-tutorial-python.js') }}"></script>
    <!-- Chapter-specific functionality now handled by shared-tutorial-python.js -->
</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav">
            <div class="azbn-container">
                <a href="/tutorials/clustering" class="course-link">
                    <span>Comprehensive Clustering Analysis</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <!-- Tutorial Header -->
        <div class="tutorial-header">
            <div class="azbn-container">
                <h1 class="chapter-title">Chapter 4: K-means Clustering Algorithm</h1>
                <p class="chapter-subtitle">Master the most popular clustering algorithm from mathematical foundations to practical implementation</p>
                
                <!-- Chapter Progress Bar (4/15) -->
                <div class="chapter-progress">
                    <div class="chapter-progress-fill" data-progress="26.67"></div>
                </div>
                
                <!-- Chapter Navigation (All 15 chapters) -->
                <div class="chapter-navigation">
                    <a href="/tutorials/clustering/chapter1" class="chapter-nav-btn">Chapter 1</a>
                    <a href="/tutorials/clustering/chapter2" class="chapter-nav-btn">Chapter 2</a>
                    <a href="/tutorials/clustering/chapter3" class="chapter-nav-btn">Chapter 3</a>
                    <a href="/tutorials/clustering/chapter4" class="chapter-nav-btn active">Chapter 4</a>
                    <a href="/tutorials/clustering/chapter5" class="chapter-nav-btn">Chapter 5</a>
                    <a href="/tutorials/clustering/chapter6" class="chapter-nav-btn">Chapter 6</a>
                    <a href="/tutorials/clustering/chapter7" class="chapter-nav-btn">Chapter 7</a>
                    <a href="/tutorials/clustering/chapter8" class="chapter-nav-btn">Chapter 8</a>
                    <a href="/tutorials/clustering/chapter9" class="chapter-nav-btn">Chapter 9</a>
                    <a href="/tutorials/clustering/chapter10" class="chapter-nav-btn">Chapter 10</a>
                    <a href="/tutorials/clustering/chapter11" class="chapter-nav-btn">Chapter 11</a>
                    <a href="/tutorials/clustering/chapter12" class="chapter-nav-btn">Chapter 12</a>
                    <a href="/tutorials/clustering/chapter13" class="chapter-nav-btn">Chapter 13</a>
                    <a href="/tutorials/clustering/chapter14" class="chapter-nav-btn">Chapter 14</a>
                    <a href="/tutorials/clustering/chapter15" class="chapter-nav-btn">Chapter 15</a>
                </div>
                
                <!-- Section Progress Bar -->
                <div class="section-progress">
                    <div class="section-progress-fill" data-progress="14.29"></div>
                </div>
                
                <!-- Section Navigation -->
                <div class="section-nav">
                    <button class="section-nav-btn azbn-btn active" data-section="algorithm">Algorithm Overview</button>
                    <button class="section-nav-btn azbn-btn" data-section="mathematics">Mathematical Foundation</button>
                    <button class="section-nav-btn azbn-btn" data-section="initialization">Initialization Methods</button>
                    <button class="section-nav-btn azbn-btn" data-section="optimization">Optimization Process</button>
                    <button class="section-nav-btn azbn-btn" data-section="convergence">Convergence Analysis</button>
                    <button class="section-nav-btn azbn-btn" data-section="demo">Interactive Demo</button>
                    <button class="section-nav-btn azbn-btn" data-section="quiz">Quiz</button>
                </div>
            </div>
        </div>

        <section class="azbn-section">
            <div class="azbn-container">
                <!-- Learning Objectives -->
                <div class="learning-objectives-box">
                    <h2>Learning Objectives</h2>
                    <ul>
                        <li>Understand the K-means algorithm step-by-step process</li>
                        <li>Master the mathematical foundations and objective function</li>
                        <li>Learn different initialization methods and their impact</li>
                        <li>Analyze convergence properties and stopping criteria</li>
                        <li>Implement K-means from scratch with interactive demos</li>
                        <li>Compare different distance metrics in K-means clustering</li>
                        <li>Evaluate clustering quality using various metrics</li>
                    </ul>
                </div>

                <!-- Main Content Area -->
                <main class="chapter-main-content">
                    <!-- Algorithm Overview Section -->
                    <div id="algorithm" class="content-section active">
                        <h2>K-means Algorithm Overview: The Foundation of Partitional Clustering</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of K-means like organizing students into study groups:</strong></p>
                            <ul>
                                <li><strong>You decide how many groups you want:</strong> Like choosing 3 study groups for a class</li>
                                <li><strong>You start with random group leaders:</strong> Pick 3 students to be the initial group leaders</li>
                                <li><strong>Everyone joins their closest group:</strong> Each student joins the group with the leader most similar to them</li>
                                <li><strong>You update the group leaders:</strong> Find the "average" student in each group to be the new leader</li>
                                <li><strong>You repeat until groups stop changing:</strong> Keep going until everyone stays in the same group</li>
                            </ul>
                        </div>
                        
                        <p>K-means is one of the most popular and widely used clustering algorithms. It's simple to understand, easy to implement, and works well for many real-world problems. The algorithm divides data into k clusters by minimizing the sum of squared distances between data points and their assigned cluster centers.</p>

                        <h3>Why K-means is So Popular</h3>
                        
                        <div class="explanation-box">
                            <p><strong>K-means is like the Swiss Army knife of clustering:</strong></p>
                            <ul>
                                <li><strong>It's simple to understand:</strong> The basic idea is intuitive - group similar things together</li>
                                <li><strong>It's fast to run:</strong> Even with large datasets, it converges quickly</li>
                                <li><strong>It works well in practice:</strong> Gives good results for many types of data</li>
                                <li><strong>It's easy to implement:</strong> You can write your own version in just a few lines of code</li>
                                <li><strong>It's widely supported:</strong> Available in almost every data science library</li>
                            </ul>
                        </div>

                        <h3>The K-means Algorithm Steps</h3>
                        
                        <div class="explanation-box">
                            <p><strong>K-means works like a smart organizer that follows these steps:</strong></p>
                            <ol>
                                <li><strong>Choose k centroids:</strong> Pick k random points as initial cluster centers</li>
                                <li><strong>Assign points to clusters:</strong> Each point joins its nearest centroid</li>
                                <li><strong>Update centroids:</strong> Move each centroid to the center of its cluster</li>
                                <li><strong>Repeat until stable:</strong> Keep going until centroids stop moving</li>
                            </ol>
                            <p><strong>Real-world analogy:</strong> Like organizing a classroom - you pick group leaders, everyone sits near their favorite leader, you move leaders to the center of their groups, and repeat until everyone is happy with their seating!</p>
                        </div>

                        <div class="unsupervised-types-grid">
                            <div class="type-card">
                                <h4>Step 1: Initialize Centroids</h4>
                                <ul>
                                    <li><strong>Random initialization:</strong> Pick k random points from your data</li>
                                    <li><strong>K-means++:</strong> Smarter initialization that spreads centroids apart</li>
                                    <li><strong>Manual selection:</strong> Choose centroids based on domain knowledge</li>
                                    <li><strong>Multiple runs:</strong> Try different random starts to find the best result</li>
                                </ul>
                            </div>
                            
                            <div class="type-card">
                                <h4>Step 2: Assign Points to Clusters</h4>
                                <ul>
                                    <li><strong>Calculate distances:</strong> Find distance from each point to each centroid</li>
                                    <li><strong>Find closest centroid:</strong> Assign each point to its nearest centroid</li>
                                    <li><strong>Create clusters:</strong> Group all points assigned to the same centroid</li>
                                    <li><strong>Handle empty clusters:</strong> Deal with centroids that have no points</li>
                                </ul>
                            </div>
                            
                            <div class="type-card">
                                <h4>Step 3: Update Centroids</h4>
                                <ul>
                                    <li><strong>Calculate new centers:</strong> Find the average of all points in each cluster</li>
                                    <li><strong>Move centroids:</strong> Update centroid positions to the new centers</li>
                                    <li><strong>Check for convergence:</strong> See if centroids moved significantly</li>
                                    <li><strong>Repeat if needed:</strong> Go back to step 2 if not converged</li>
                                </ul>
                            </div>
                        </div>

                        <h3>Key Concepts in K-means</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Understanding these concepts helps you use K-means effectively:</strong></p>
                            <ul>
                                <li><strong>Centroids:</strong> The "center" of each cluster - like the average student in a study group</li>
                                <li><strong>Convergence:</strong> When centroids stop moving significantly - like when groups stabilize</li>
                                <li><strong>Objective function:</strong> The "score" we're trying to minimize - like minimizing travel distance to group leaders</li>
                                <li><strong>Local optima:</strong> Sometimes the algorithm gets "stuck" in a good but not perfect solution</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Mathematical Foundation Section -->
                    <div id="mathematics" class="content-section">
                        <h2>Mathematical Foundation of K-means</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of the mathematical foundation like the rules of a game:</strong></p>
                            <ul>
                                <li><strong>Objective function:</strong> Like a scoring system that tells you how well you're doing</li>
                                <li><strong>Optimization:</strong> Like trying to get the highest score possible</li>
                                <li><strong>Convergence:</strong> Like knowing when you've reached the best score you can get</li>
                                <li><strong>Constraints:</strong> Like the rules that limit what moves you can make</li>
                            </ul>
                        </div>

                        <p>The mathematical foundation of K-means provides the theoretical framework that explains why the algorithm works and how to optimize its performance. Understanding these mathematical principles helps you make informed decisions about parameter settings, initialization methods, and convergence criteria.</p>

                        <h3>Why Mathematical Understanding Matters</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Understanding the math helps you:</strong></p>
                            <ul>
                                <li><strong>Choose the right parameters:</strong> Know why certain settings work better than others</li>
                                <li><strong>Diagnose problems:</strong> Understand why clustering might fail or give poor results</li>
                                <li><strong>Optimize performance:</strong> Make the algorithm run faster and more efficiently</li>
                                <li><strong>Extend the algorithm:</strong> Modify K-means for specific applications</li>
                            </ul>
                        </div>

                        <h3>The Objective Function</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Think of the objective function like a GPS that guides you to the best clustering:</strong></p>
                            <ul>
                                <li><strong>It measures how good your clustering is:</strong> Like a score that tells you how well you've organized the data</li>
                                <li><strong>It guides the algorithm:</strong> Like a compass that points toward better solutions</li>
                                <li><strong>It helps you compare results:</strong> Like a ruler that measures which clustering is better</li>
                                <li><strong>It ensures convergence:</strong> Like brakes that stop the algorithm when it can't improve anymore</li>
                            </ul>
                        </div>
                        
                        <p>The K-means algorithm minimizes the sum of squared distances between data points and their assigned cluster centroids. This objective function, known as the Within-Cluster Sum of Squares (WCSS), provides a measure of clustering quality.</p>

                        <div class="formula-box">
                            <h3>WCSS Objective Function</h3>
                            <p>For k clusters with centroids C = {c₁, c₂, ..., cₖ} and data points X = {x₁, x₂, ..., xₙ}, the objective function is:</p>
                            
                            <div class="formula-display">
                                <strong>WCSS = Σᵢ₌₁ᵏ Σₓ∈Cᵢ ||x - cᵢ||²</strong>
                            </div>
                            
                            <p><strong>Formula breakdown (In Plain English):</strong></p>
                            <ul>
                                <li><strong>For each cluster:</strong> Look at all the points assigned to that cluster</li>
                                <li><strong>Calculate distances:</strong> Find the distance from each point to the cluster center</li>
                                <li><strong>Square the distances:</strong> This makes larger distances count more heavily</li>
                                <li><strong>Sum everything up:</strong> Add up all the squared distances across all clusters</li>
                                <li><strong>Minimize this sum:</strong> The goal is to make this total as small as possible</li>
                            </ul>
                            
                            <p><strong>Real-world analogy:</strong> Like organizing a classroom where you want to minimize the total "travel distance" from each student to their group leader. The closer everyone is to their leader, the better the organization!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Initialization Methods Section -->
                    <div id="initialization" class="content-section">
                        <h2>Initialization Methods: Starting K-means Right</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of initialization like choosing the starting positions in a game:</strong></p>
                            <ul>
                                <li><strong>Random initialization:</strong> Like randomly placing game pieces - sometimes lucky, sometimes not</li>
                                <li><strong>K-means++:</strong> Like strategically placing pieces for the best starting advantage</li>
                                <li><strong>Manual initialization:</strong> Like using your knowledge to pick the best starting positions</li>
                                <li><strong>Multiple runs:</strong> Like playing the game multiple times to find the best starting strategy</li>
                            </ul>
                            </div>
                            
                        <p>The way you initialize K-means can significantly impact the final clustering results. Poor initialization can lead to suboptimal clusters, while good initialization can help the algorithm converge to better solutions faster.</p>

                        <h3>Why Initialization Matters</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Good initialization is like having a good starting position in chess:</strong></p>
                            <ul>
                                <li><strong>Faster convergence:</strong> You reach the best solution more quickly</li>
                                <li><strong>Better final results:</strong> You're more likely to find the optimal clustering</li>
                                <li><strong>Fewer iterations:</strong> Less computational work needed</li>
                                <li><strong>More stable results:</strong> Consistent outcomes across different runs</li>
                            </ul>
                        </div>

                        <h3>Common Initialization Methods</h3>
                        
                        <div class="unsupervised-types-grid">
                            <div class="type-card">
                                <h4>Random Initialization</h4>
                                <ul>
                                    <li><strong>How it works:</strong> Pick k random points from your data</li>
                                    <li><strong>Pros:</strong> Simple, fast, unbiased</li>
                                    <li><strong>Cons:</strong> Can lead to poor starting positions</li>
                                    <li><strong>Best for:</strong> When you don't know much about your data</li>
                                </ul>
                            </div>
                            
                            <div class="type-card">
                                <h4>K-means++ Initialization</h4>
                                <ul>
                                    <li><strong>How it works:</strong> Smart selection that spreads centroids apart</li>
                                    <li><strong>Pros:</strong> Usually gives better starting positions</li>
                                    <li><strong>Cons:</strong> Slightly more complex to implement</li>
                                    <li><strong>Best for:</strong> Most real-world applications</li>
                                </ul>
                            </div>
                            
                            <div class="type-card">
                                <h4>Manual Initialization</h4>
                                <ul>
                                    <li><strong>How it works:</strong> Choose centroids based on domain knowledge</li>
                                    <li><strong>Pros:</strong> Can incorporate expert knowledge</li>
                                    <li><strong>Cons:</strong> Requires deep understanding of the data</li>
                                    <li><strong>Best for:</strong> When you have strong domain expertise</li>
                                </ul>
                            </div>
                        </div>


                        <div class="interactive-container">
                            <h3>Initialization Comparison Demo</h3>
                            <div class="demo-controls">
                                <label for="init-method">Initialization Method:</label>
                                <select id="init-method">
                                    <option value="random">Random</option>
                                    <option value="kmeans++">K-means++</option>
                                </select>
                                
                                <label for="num-clusters-init">Number of Clusters:</label>
                                <input type="range" id="num-clusters-init" min="2" max="6" value="3">
                                <span id="clusters-init-display">3</span>
                                
                                <button onclick="runInitializationDemo()" class="azbn-btn">Run Demo</button>
                                <button onclick="resetInitializationDemo()" class="azbn-btn azbn-secondary">Reset</button>
                            </div>
                            
                            <div class="metric-visualization" id="initialization-canvas">
                                <p>Click "Run Demo" to compare different initialization methods</p>
                            </div>
                        </div>
                    </div>

                    <!-- Optimization Process Section -->
                    <div id="optimization" class="content-section">
                        <h2>Optimization Process: How K-means Improves</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of the optimization process like a smart organizer that keeps improving:</strong></p>
                            <ul>
                                <li><strong>Assignment step:</strong> Like reassigning students to better study groups</li>
                                <li><strong>Update step:</strong> Like moving group leaders to the center of their groups</li>
                                <li><strong>Iteration:</strong> Like repeating this process until everyone is optimally placed</li>
                                <li><strong>Convergence:</strong> Like knowing when the organization can't get any better</li>
                            </ul>
                        </div>
                        
                            <p>The K-means optimization process involves iteratively improving the clustering by alternating between assignment and update steps. Understanding this process helps in implementing efficient algorithms and analyzing convergence behavior.</p>

                        <h3>Why Understanding Optimization Matters</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Understanding the optimization process helps you:</strong></p>
                            <ul>
                                <li><strong>Implement the algorithm correctly:</strong> Know exactly what each step does</li>
                                <li><strong>Debug problems:</strong> Understand why clustering might fail</li>
                                <li><strong>Optimize performance:</strong> Make the algorithm run faster</li>
                                <li><strong>Analyze convergence:</strong> Know when to stop the algorithm</li>
                            </ul>
                        </div>

                        <div class="formula-box">
                            <h3>Assignment Step</h3>
                            <div class="formula-display">
                                <h4>Point-to-Cluster Assignment</h4>
                                <div class="formula">cᵢ = argminⱼ ||xᵢ - μⱼ||²</div>
                                <p><strong>Where:</strong></p>
                                <ul>
                                    <li>cᵢ is the cluster assignment for point xᵢ</li>
                                    <li>μⱼ is the centroid of cluster j</li>
                                    <li>argmin finds the cluster with minimum distance</li>
                                </ul>
                            </div>
                        </div>

                        <div class="formula-box">
                            <h3>Update Step</h3>
                            <div class="formula-display">
                                <h4>Centroid Recalculation</h4>
                                <div class="formula">μⱼ = (1/|Sⱼ|) Σᵢ∈Sⱼ xᵢ</div>
                                <p><strong>Where:</strong></p>
                                <ul>
                                    <li>Sⱼ is the set of points assigned to cluster j</li>
                                    <li>|Sⱼ| is the number of points in cluster j</li>
                                    <li>μⱼ is the new centroid for cluster j</li>
                                </ul>
                            </div>
                        </div>

                        <div class="model-box">
                            <h3>Optimization Properties</h3>
                            <ul>
                                <li><strong>Coordinate Descent:</strong> Alternates between optimizing assignments and centroids</li>
                                <li><strong>Monotonic Improvement:</strong> Objective function never increases</li>
                                <li><strong>Finite Convergence:</strong> Guaranteed to converge in finite steps</li>
                                <li><strong>Local Optima:</strong> May converge to local minimum</li>
                            </ul>
                        </div>

                        <div class="interactive-container">
                            <h3>Step-by-Step Optimization Demo</h3>
                            <div class="demo-controls">
                                <button onclick="stepOptimization()" class="azbn-btn">Next Step</button>
                                <button onclick="runFullOptimization()" class="azbn-btn">Run Full Algorithm</button>
                                <button onclick="resetOptimization()" class="azbn-btn azbn-secondary">Reset</button>
                            </div>
                            
                            <div class="metric-visualization" id="optimization-canvas">
                                <p>Click "Next Step" to see the optimization process step by step</p>
                            </div>
                        </div>
                    </div>

                    <!-- Convergence Analysis Section -->
                    <div id="convergence" class="content-section">
                        <h2>Convergence Analysis: When K-means Stops Improving</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of convergence like knowing when to stop reorganizing:</strong></p>
                            <ul>
                                <li><strong>Centroid movement:</strong> Like knowing when group leaders stop moving to better positions</li>
                                <li><strong>Assignment stability:</strong> Like knowing when students stop switching groups</li>
                                <li><strong>Objective improvement:</strong> Like knowing when the organization score stops getting better</li>
                                <li><strong>Maximum iterations:</strong> Like setting a time limit to avoid endless reorganization</li>
                            </ul>
                        </div>
                        
                            <p>Understanding convergence properties is essential for implementing K-means correctly and determining appropriate stopping criteria. The algorithm's convergence behavior affects both computational efficiency and clustering quality.</p>

                        <h3>Why Convergence Analysis Matters</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Understanding convergence helps you:</strong></p>
                            <ul>
                                <li><strong>Know when to stop:</strong> Avoid running the algorithm longer than necessary</li>
                                <li><strong>Ensure quality:</strong> Make sure the algorithm has found a good solution</li>
                                <li><strong>Optimize performance:</strong> Balance speed and accuracy</li>
                                <li><strong>Debug problems:</strong> Understand why the algorithm might not converge</li>
                            </ul>
                        </div>

                        <div class="model-box">
                            <h3>Convergence Criteria</h3>
                            <ul>
                                <li><strong>Centroid Movement:</strong> Stop when centroids move less than threshold</li>
                                <li><strong>Assignment Stability:</strong> Stop when cluster assignments don't change</li>
                                <li><strong>Objective Function:</strong> Stop when WCSS improvement is minimal</li>
                                <li><strong>Maximum Iterations:</strong> Stop after fixed number of iterations</li>
                            </ul>
                        </div>

                        <div class="formula-box">
                            <h3>Convergence Conditions</h3>
                            <div class="formula-display">
                                <h4>Centroid Movement Threshold</h4>
                                <div class="formula">maxᵢ ||μᵢ^(t+1) - μᵢ^(t)|| < ε</div>
                                <p><strong>Where:</strong></p>
                                <ul>
                                    <li>μᵢ^(t) is centroid i at iteration t</li>
                                    <li>ε is the convergence threshold (typically 1e-4)</li>
                                    <li>maxᵢ finds the maximum movement across all centroids</li>
                                </ul>
                            </div>
                        </div>

                        <div class="explanation-box">
                            <h3>Convergence Guarantees</h3>
                            <p>K-means is guaranteed to converge because:</p>
                            <ul>
                                <li>The objective function is bounded below by zero</li>
                                <li>Each iteration decreases or maintains the objective function</li>
                                <li>There are only finitely many possible cluster assignments</li>
                                <li>The algorithm cannot cycle due to strict improvement</li>
                            </ul>
                        </div>

                        <div class="image-container">
                            <h4>Visualization: Convergence Behavior</h4>
                            <div class="visualization-container" id="convergence-viz">
                                <div class="chart-container" id="convergence-chart">
                                    <!-- Python-generated Plotly chart will be inserted here -->
                                    <div class="loading-spinner">
                                        <p>Loading convergence visualization...</p>
                                    </div>
                                </div>
                                <p><strong>Convergence Pattern:</strong> Observe how the objective function decreases rapidly in early iterations and then stabilizes.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Demo Section -->
                    <div id="demo" class="content-section">
                        <h2>Interactive K-means Demo</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of this demo like a K-means laboratory where you can experiment:</strong></p>
                            <ul>
                                <li><strong>You can control the number of clusters:</strong> Like deciding how many study groups to create</li>
                                <li><strong>You can choose initialization methods:</strong> Like picking different ways to start the organization</li>
                                <li><strong>You can watch the algorithm work:</strong> See how it improves the clustering step by step</li>
                                <li><strong>You can compare results:</strong> See how different settings affect the final clustering</li>
                            </ul>
                        </div>
                        
                            <p>Experiment with the K-means algorithm using this interactive demo. Adjust parameters, try different initialization methods, and observe how they affect clustering results and convergence behavior.</p>

                        <h3>How to Use This Demo</h3>
                        
                        <div class="explanation-box">
                            <p><strong>Step-by-step guide:</strong></p>
                            <ol>
                                <li><strong>Set the number of clusters:</strong> Use the slider to choose how many clusters you want</li>
                                <li><strong>Choose initialization method:</strong> Try different ways to start the algorithm</li>
                                <li><strong>Generate data:</strong> Create a new dataset to cluster</li>
                                <li><strong>Run K-means:</strong> Watch the algorithm work step by step</li>
                                <li><strong>Compare results:</strong> Try different settings and see how they affect clustering</li>
                            </ol>
                            <p><strong>Try these experiments:</strong></p>
                            <ul>
                                <li>Compare random vs K-means++ initialization</li>
                                <li>See how the number of clusters affects results</li>
                                <li>Watch how centroids move during optimization</li>
                                <li>Notice when the algorithm converges</li>
                            </ul>
                        </div>

                        <div class="interactive-container">
                            <h3>K-means Clustering Demo</h3>
                            
                            <div class="demo-controls">
                                <div class="control-group">
                                    <label for="demo-clusters">Number of Clusters:</label>
                                    <input type="range" id="demo-clusters" min="2" max="8" value="3">
                                    <span id="demo-clusters-display">3</span>
                                </div>
                                
                                <div class="control-group">
                                    <label for="demo-init">Initialization:</label>
                                    <select id="demo-init">
                                        <option value="random">Random</option>
                                        <option value="kmeans++">K-means++</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="demo-data">Data Type:</label>
                                    <select id="demo-data">
                                        <option value="blobs">Well-separated Blobs</option>
                                        <option value="random">Random Points</option>
                                        <option value="moons">Moon-shaped</option>
                                    </select>
                                </div>
                                
                                <div class="control-buttons">
                                    <button onclick="generateDemoData()" class="azbn-btn">Generate Data</button>
                                    <button onclick="runKmeansDemo()" class="azbn-btn">Run K-means</button>
                                    <button onclick="stepKmeansDemo()" class="azbn-btn">Step-by-Step</button>
                                    <button onclick="resetDemo()" class="azbn-btn azbn-secondary">Reset</button>
                                </div>
                            </div>
                            
                            <div class="demo-status" id="demo-status">
                                <p>Click "Generate Data" to start the demo</p>
                            </div>
                            
                            <div class="metric-visualization" id="kmeans-demo-canvas">
                                <p>Interactive K-means clustering visualization will appear here</p>
                            </div>
                            
                            <div class="demo-metrics" id="demo-metrics" style="display: none;">
                                <h4>Clustering Metrics</h4>
                                <div class="metrics-grid">
                                    <div class="metric-item">
                                        <span class="metric-label">WCSS:</span>
                                        <span class="metric-value" id="wcss-value">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Silhouette:</span>
                                        <span class="metric-value" id="silhouette-value">-</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Iterations:</span>
                                        <span class="metric-value" id="iterations-value">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Section -->
                    <div id="quiz" class="content-section">
                        <h2>Test Your K-means Knowledge</h2>
                        
                        <div class="explanation-box">
                            <p><strong>Think of this quiz like a K-means certification test:</strong></p>
                            <ul>
                                <li><strong>It's okay to get questions wrong:</strong> That's how you learn! Wrong answers help you identify what to review</li>
                                <li><strong>Each question teaches you something:</strong> Even if you get it right, the explanation reinforces your understanding</li>
                                <li><strong>It's not about the score:</strong> It's about making sure you understand the key concepts</li>
                                <li><strong>You can take it multiple times:</strong> Practice makes perfect!</li>
                            </ul>
                        </div>
                        
                        <p>Evaluate your understanding of K-means algorithm fundamentals, mathematical foundations, and optimization processes.</p>

                        <h3>What This Quiz Covers</h3>
                        
                        <div class="explanation-box">
                            <p><strong>This quiz tests your understanding of:</strong></p>
                            <ul>
                                <li><strong>K-means algorithm steps:</strong> How the algorithm works from start to finish</li>
                                <li><strong>Objective function:</strong> What the algorithm is trying to minimize</li>
                                <li><strong>Initialization methods:</strong> Different ways to start the algorithm</li>
                                <li><strong>Optimization process:</strong> How the algorithm improves the clustering</li>
                                <li><strong>Convergence criteria:</strong> When to stop the algorithm</li>
                            </ul>
                            <p><strong>Don't worry if you don't get everything right the first time - that's normal! The goal is to learn.</strong></p>
                        </div>
                        
                        <div class="enhanced-quiz-container">
                            <div class="enhanced-quiz-question">
                                <h4>Question 1: What is the primary objective function minimized by K-means?</h4>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>Between-cluster sum of squares</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="correct">
                                    <p>Within-cluster sum of squares (WCSS)</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>Silhouette coefficient</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>Calinski-Harabasz index</p>
                                </div>
                                <div class="enhanced-quiz-explanation">
                                    <p><strong>Correct!</strong> K-means minimizes the within-cluster sum of squares (WCSS), which measures the total squared distance of all points from their cluster centroids.</p>
                                </div>
                            </div>
                        </div>

                        <div class="enhanced-quiz-container">
                            <div class="enhanced-quiz-question">
                                <h4>Question 2: How are centroids updated in each K-means iteration?</h4>
                                <div class="enhanced-quiz-option" data-answer="correct">
                                    <p>As the arithmetic mean of all points in the cluster</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>As the median of all points in the cluster</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>As the point closest to the cluster center</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>As a weighted average based on point distances</p>
                                </div>
                                <div class="enhanced-quiz-explanation">
                                    <p><strong>Correct!</strong> Centroids are updated as the arithmetic mean of all points assigned to that cluster, which minimizes the WCSS for that cluster.</p>
                                </div>
                            </div>
                        </div>

                        <div class="enhanced-quiz-container">
                            <div class="enhanced-quiz-question">
                                <h4>Question 3: What is the main advantage of K-means++ initialization over random initialization?</h4>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>It's faster to compute</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>It guarantees global optimum</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="correct">
                                    <p>It provides better initialization leading to faster convergence</p>
                                </div>
                                <div class="enhanced-quiz-option" data-answer="incorrect">
                                    <p>It works better with non-spherical clusters</p>
                                </div>
                                <div class="enhanced-quiz-explanation">
                                    <p><strong>Correct!</strong> K-means++ initialization probabilistically selects initial centroids that are well-separated, leading to better starting points and faster convergence to good local minima.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </section>
    </main>

    <!-- Sub-section Navigation Footer -->
    <div class="sub-section-nav-footer">
        <div class="sub-nav-buttons">
            <button id="prev-subsection" class="sub-nav-btn azbn-btn prev-btn" style="display: none;">
                <span>← Previous</span>
                <span class="sub-nav-label" id="prev-label"></span>
            </button>
            <button id="next-subsection" class="sub-nav-btn azbn-btn next-btn">
                <span class="sub-nav-label" id="next-label">Mathematical Foundation</span>
                <span>Next →</span>
            </button>
        </div>
    </div>

    <!-- Chapter Navigation Footer -->
    <div class="navigation-buttons">
        <a href="/tutorials/clustering/chapter3" class="azbn-btn azbn-secondary" onclick="scrollToTop()">← Chapter 3: Minkowski Distance</a>
        <a href="/tutorials/clustering/chapter5" class="azbn-btn azbn-secondary" onclick="scrollToTop()">Chapter 5: K-Means Clustering →</a>
    </div>

    <!-- Python API Tutorial Integration -->
    

    <!-- Visualization Styles -->
    <style>
    .visualization-container {
        margin: 2rem 0;
        padding: 1.5rem;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        background-color: #fafafa;
    }

    .chart-container {
        min-height: 400px;
        margin: 1rem 0;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: white;
    }

    .loading-spinner {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 400px;
        color: #666;
    }

    .error-message {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 400px;
        color: #d32f2f;
        background-color: #ffebee;
        border: 1px solid #ffcdd2;
        border-radius: 4px;
    }
    </style>
</body>
</html>
