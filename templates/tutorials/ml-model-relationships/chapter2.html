<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2: Foundation Models & Problems - ML Model Relationships</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/ml-model-relationships.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/chapter2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/nlp/nlp.css') }}">
    <script src="{{ url_for('static', filename='js/tutorials/clustering/shared-tutorial-python.js') }}"></script>
    <!-- Chapter-specific functionality now handled by shared-tutorial-python.js -->
</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav" style="top: 50px;">
            <div class="azbn-container" style="display: flex; justify-content: space-between; align-items: center;">
                <a href="/tutorials/ml-model-relationships" style="text-decoration: none; color: #4f46e5; display: flex; align-items: center; gap: 0.5rem;">
                    <span>ML Model Relationships</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main style="padding-top: 100px;">
        <!-- Tutorial Header -->
        <div class="nlp-header">
            <h1>Chapter 2: Foundation Models & Their Problems</h1>
            <p>Understanding the building blocks of ML and the fundamental problems that led to advanced techniques</p>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 25%;"></div>
            </div>
        </div>

        <!-- Course Navigation -->
        <div class="course-nav">
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter1'">Chapter 1</button>
            <button class="nav-btn active" onclick="window.location.href='/tutorials/ml-model-relationships/chapter2'">Chapter 2</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter3'">Chapter 3</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter4'">Chapter 4</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter5'">Chapter 5</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter6'">Chapter 6</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter7'">Chapter 7</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter8'">Chapter 8</button>
        </div>

        <section class="azbn-section">
            <div class="azbn-container chapter1-container">

                <div class="progress-tracker">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>

                <div class="section-nav">
                    <button class="active" onclick="showSection('overview')">Overview</button>
                    <button onclick="showSection('linear')">Linear Models</button>
                    <button onclick="showSection('trees')">Decision Trees</button>
                    <button onclick="showSection('problems')">The Problems</button>
                    <button onclick="showSection('quiz')">Quiz</button>
                </div>

                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <h2>Why Foundation Models Matter</h2>
                    <p>
                        Before diving into advanced techniques like XGBoost and Random Forests, we need to understand 
                        the foundation models they're built upon. These simple models reveal fundamental problems 
                        that drive innovation in machine learning.
                    </p>
                    
                    <div class="azbn-card">
                        <h3>The Two Pillars of ML</h3>
                        <p>Most machine learning algorithms build upon two fundamental approaches:</p>
                        <div class="model-comparison">
                            <div class="model-card linear">
                                <h4>📈 Linear Models</h4>
                                <p><strong>Core Idea:</strong> Fit a straight line (or hyperplane) through data</p>
                                <p><strong>Examples:</strong> Linear Regression, Logistic Regression</p>
                                <p><strong>Strength:</strong> Simple, fast, interpretable</p>
                                <p><strong>Weakness:</strong> Can't capture complex patterns</p>
                            </div>
                            
                            <div class="model-card tree">
                                <h4>🌳 Tree Models</h4>
                                <p><strong>Core Idea:</strong> Create decision rules by splitting data</p>
                                <p><strong>Examples:</strong> Decision Trees, Rule-based systems</p>
                                <p><strong>Strength:</strong> Captures complex patterns, interpretable</p>
                                <p><strong>Weakness:</strong> Prone to overfitting</p>
                            </div>
                        </div>
                    </div>

                    <h3>The Journey We'll Take</h3>
                    <p>In this chapter, you'll discover:</p>
                    <ul>
                        <li>How linear models work and their bias-variance tradeoff</li>
                        <li>Why decision trees overfit and how complexity affects performance</li>
                        <li>Interactive demos showing these problems in action</li>
                        <li>Why these problems led to regularization and ensemble methods</li>
                    </ul>

                    <div class="interactive-demo">
                        <h4>Foundation Model Selector</h4>
                        <p>Choose your data characteristics to see which foundation model works best:</p>
                        
                        <div class="parameter-controls">
                            <div class="parameter-control">
                                <label>Data Complexity:</label>
                                <input type="range" id="data-complexity" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="complexity-value">3</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Dataset Size:</label>
                                <input type="range" id="data-size" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="size-value">3</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Interpretability Need:</label>
                                <input type="range" id="interpretability" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="interp-value">3</span>
                            </div>
                        </div>
                        
                        <div id="model-recommendation" style="margin: 1rem 0; padding: 1rem; background: white; border-radius: 8px;">
                            <h5>Recommended Model:</h5>
                            <div id="recommendation-details"></div>
                        </div>
                    </div>
                </div>

                <!-- Linear Models Section -->
                <div id="linear" class="content-section">
                    <h2>Linear Models: Simple but Powerful</h2>
                    <p>
                        Linear models are the foundation of machine learning. Despite their simplicity, 
                        they reveal fundamental concepts that apply to all ML algorithms.
                    </p>

                    <div class="visualization-container">
                        <div class="chart-container">
                            <h4>Linear Regression Demo</h4>
                            <img src="/static/images/tutorials/ml-model-relationships/chapter2/linear-regression-demo.png" 
                                 alt="Linear regression visualization showing data points and fitted line with bias-variance tradeoff"
                                 class="chart-image">
                        </div>
                        
                        <div>
                            <h4>Interactive Parameters</h4>
                            <div class="parameter-controls">
                                <div class="parameter-control">
                                    <label>Model Complexity:</label>
                                    <input type="range" id="linear-complexity" min="1" max="10" value="1" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="linear-complexity-value">1</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Noise Level:</label>
                                    <input type="range" id="noise-level" min="0" max="10" value="3" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="noise-value">3</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Training Size:</label>
                                    <input type="range" id="training-size" min="10" max="1000" value="100" step="10" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="training-size-value">100</span>
                                </div>
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="bias-metric">0.15</div>
                                    <div class="metric-label">Bias</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="variance-metric">0.08</div>
                                    <div class="metric-label">Variance</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="total-error">0.23</div>
                                    <div class="metric-label">Total Error</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="model-demo">
                        <h4>The Bias-Variance Tradeoff</h4>
                        <p>Linear models demonstrate the fundamental bias-variance tradeoff in machine learning:</p>
                        
                        <div class="pros-cons-grid">
                            <div class="pros">
                                <h5>Low Variance</h5>
                                <ul>
                                    <li>Consistent predictions across different datasets</li>
                                    <li>Not sensitive to small data changes</li>
                                    <li>Reliable and stable</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h5>High Bias (Potentially)</h5>
                                <ul>
                                    <li>May be too simple for complex patterns</li>
                                    <li>Underfitting on non-linear data</li>
                                    <li>Limited model capacity</li>
                                </ul>
                            </div>
                        </div>
                        
                        <button onclick="demonstrateBiasVariance()" class="azbn-btn">Run Bias-Variance Demo</button>
                        <div id="bias-variance-results" style="margin-top: 1rem; display: none;"></div>
                    </div>

                    <div class="problem-highlight">
                        <h4>Linear Model Limitations</h4>
                        <p>As you experiment with the parameters above, you'll notice:</p>
                        <ul>
                            <li><strong>Limited Flexibility:</strong> Can't capture non-linear relationships</li>
                            <li><strong>Feature Engineering Required:</strong> Need to manually create polynomial features</li>
                            <li><strong>Assumption Heavy:</strong> Assumes linear relationship between features and target</li>
                        </ul>
                        <p><strong>This leads us to need more flexible models... like decision trees!</strong></p>
                    </div>
                </div>

                <!-- Decision Trees Section -->
                <div id="trees" class="content-section">
                    <h2>Decision Trees: Flexibility with a Cost</h2>
                    <p>
                        Decision trees solve the flexibility problem of linear models but introduce their own challenges.
                        Let's explore what makes them powerful and problematic.
                    </p>

                    <div class="visualization-container">
                        <div class="chart-container">
                            <h4>Decision Tree Overfitting</h4>
                            <img src="/static/images/tutorials/ml-model-relationships/chapter2/decision-tree-overfitting.png" 
                                 alt="Decision tree visualization showing overfitting with complex branches and poor generalization"
                                 class="chart-image">
                        </div>
                        
                        <div>
                            <h4>Tree Complexity Control</h4>
                            <div class="parameter-controls">
                                <div class="parameter-control">
                                    <label>Max Depth:</label>
                                    <input type="range" id="tree-depth" min="1" max="10" value="3" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="tree-depth-value">3</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Min Samples Split:</label>
                                    <input type="range" id="min-samples" min="2" max="50" value="10" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="min-samples-value">10</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Dataset Complexity:</label>
                                    <input type="range" id="tree-data-complexity" min="1" max="5" value="3" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="tree-complexity-value">3</span>
                                </div>
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="training-accuracy">0.95</div>
                                    <div class="metric-label">Training Acc</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="validation-accuracy">0.72</div>
                                    <div class="metric-label">Validation Acc</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="overfitting-score">0.23</div>
                                    <div class="metric-label">Overfitting</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="overfitting-demo">
                        <h4>Interactive Overfitting Demonstration</h4>
                        <p>See how decision tree complexity affects performance:</p>
                        
                        <div class="dataset-selector">
                            <button class="dataset-btn active" onclick="selectDataset('simple')">Simple Data</button>
                            <button class="dataset-btn" onclick="selectDataset('complex')">Complex Data</button>
                            <button class="dataset-btn" onclick="selectDataset('noisy')">Noisy Data</button>
                        </div>
                        
                        <div class="model-demo">
                            <label for="complexity-slider">Tree Complexity:</label>
                            <input type="range" id="complexity-slider" class="complexity-slider" min="1" max="10" value="3" oninput="updateComplexity()">
                            <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #64748b;">
                                <span>Simple</span>
                                <span>Complex</span>
                            </div>
                            
                            <div id="complexity-explanation" style="margin: 1rem 0; padding: 1rem; background: #f1f5f9; border-radius: 8px;">
                                <h5 id="complexity-title">Moderate Complexity (Depth: 3)</h5>
                                <p id="complexity-description">Good balance between fitting the data and generalizing to new examples.</p>
                            </div>
                        </div>
                    </div>

                    <div class="model-comparison">
                        <div class="azbn-card">
                            <h3>🎯 Decision Tree Strengths</h3>
                            <ul>
                                <li><strong>Non-linear Patterns:</strong> Can capture complex relationships</li>
                                <li><strong>Feature Interactions:</strong> Automatically finds feature combinations</li>
                                <li><strong>Interpretability:</strong> Easy to visualize decision paths</li>
                                <li><strong>No Assumptions:</strong> Works with any data distribution</li>
                                <li><strong>Mixed Data Types:</strong> Handles numerical and categorical features</li>
                            </ul>
                        </div>

                        <div class="azbn-card">
                            <h3>⚠️ Decision Tree Problems</h3>
                            <ul>
                                <li><strong>Overfitting:</strong> Memorizes training data noise</li>
                                <li><strong>Instability:</strong> Small data changes create different trees</li>
                                <li><strong>Bias:</strong> Favors features with more split points</li>
                                <li><strong>Limited Expressiveness:</strong> Axis-aligned splits only</li>
                                <li><strong>High Variance:</strong> Very sensitive to training data</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Problems Section -->
                <div id="problems" class="content-section">
                    <h2>The Fundamental Problems</h2>
                    <p>
                        Now you've seen both foundation models in action. Each has critical limitations that 
                        drive the need for more sophisticated approaches.
                    </p>

                    <div class="problem-highlight">
                        <h4>Problem #1: The Bias-Variance Tradeoff</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0;">
                            <div>
                                <h5>Linear Models</h5>
                                <p><strong>High Bias, Low Variance</strong></p>
                                <ul>
                                    <li>Consistent but potentially inaccurate</li>
                                    <li>Underfits complex patterns</li>
                                    <li>Limited model capacity</li>
                                </ul>
                            </div>
                            <div>
                                <h5>Decision Trees</h5>
                                <p><strong>Low Bias, High Variance</strong></p>
                                <ul>
                                    <li>Flexible but inconsistent</li>
                                    <li>Overfits to training data</li>
                                    <li>Unstable predictions</li>
                                </ul>
                            </div>
                        </div>
                        <p><strong>Solution Preview:</strong> Regularization techniques (L1/L2) and Ensemble methods balance this tradeoff!</p>
                    </div>

                    <div class="problem-highlight">
                        <h4>Problem #2: Single Model Limitations</h4>
                        <p>Both foundation models suffer from being "single" models:</p>
                        <ul>
                            <li><strong>Limited Perspective:</strong> Each model has one way of looking at data</li>
                            <li><strong>Sensitive to Data:</strong> Small changes can dramatically affect results</li>
                            <li><strong>Error Propagation:</strong> If the model is wrong, it's completely wrong</li>
                        </ul>
                        <p><strong>Solution Preview:</strong> Ensemble methods combine multiple models to overcome individual limitations!</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Problem Demonstration</h4>
                        <p>See how the same data affects different models:</p>
                        
                        <div class="parameter-controls">
                            <div class="parameter-control">
                                <label>Add Noise to Data:</label>
                                <input type="range" id="demo-noise" min="0" max="10" value="0" oninput="updateProblemDemo()">
                                <span class="parameter-value" id="demo-noise-value">0</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Data Complexity:</label>
                                <input type="range" id="demo-complexity" min="1" max="5" value="1" oninput="updateProblemDemo()">
                                <span class="parameter-value" id="demo-complexity-value">1</span>
                            </div>
                        </div>
                        
                        <div class="model-comparison">
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="linear-performance">0.85</div>
                                    <div class="metric-label">Linear Model</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="tree-performance">0.72</div>
                                    <div class="metric-label">Decision Tree</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="ensemble-preview">0.91</div>
                                    <div class="metric-label">Ensemble (Preview)</div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="problem-explanation" style="margin: 1rem 0; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                            <p>Notice how the ensemble consistently outperforms individual models!</p>
                        </div>
                    </div>

                    <div class="azbn-card">
                        <h3>What's Coming Next</h3>
                        <p>Now that you understand the fundamental problems, you're ready to see how the ML community solved them:</p>
                        <ul>
                            <li><strong>Chapter 3:</strong> Regularization techniques (L1/L2) that control overfitting</li>
                            <li><strong>Chapter 4-6:</strong> Ensemble methods that combine multiple models</li>
                            <li><strong>Chapter 7:</strong> XGBoost - the optimized implementation that wins competitions</li>
                        </ul>
                        <p>Each solution directly addresses the problems you've discovered in this chapter!</p>
                    </div>
                </div>

                <!-- Quiz Section -->
                <div id="quiz" class="content-section">
                    <h2>Chapter 2 Quiz</h2>
                    <p>Test your understanding of foundation models and their problems:</p>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz1">
                        <div class="enhanced-quiz-question">
                            <h4>Question 1: What is the main tradeoff between linear models and decision trees?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">Linear models are always better</div>
                        <div class="enhanced-quiz-option" data-correct="true">Linear models have high bias/low variance, decision trees have low bias/high variance</div>
                        <div class="enhanced-quiz-option" data-correct="false">Decision trees are always more accurate</div>
                        <div class="enhanced-quiz-option" data-correct="false">There is no tradeoff</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Correct!</strong> This is the fundamental bias-variance tradeoff. Linear models are consistent but potentially too simple (high bias), while decision trees are flexible but unstable (high variance).
                        </div>
                    </div>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz2">
                        <div class="enhanced-quiz-question">
                            <h4>Question 2: Why do decision trees tend to overfit?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">They are too simple</div>
                        <div class="enhanced-quiz-option" data-correct="false">They can't capture complex patterns</div>
                        <div class="enhanced-quiz-option" data-correct="true">They can memorize training data by creating very specific rules</div>
                        <div class="enhanced-quiz-option" data-correct="false">They require too much data</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Exactly!</strong> Decision trees can keep splitting until they perfectly classify every training example, essentially memorizing the data rather than learning generalizable patterns.
                        </div>
                    </div>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz3">
                        <div class="enhanced-quiz-question">
                            <h4>Question 3: Which problem do ensemble methods primarily solve?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">Making models run faster</div>
                        <div class="enhanced-quiz-option" data-correct="true">Reducing the limitations of single models by combining multiple models</div>
                        <div class="enhanced-quiz-option" data-correct="false">Making models more interpretable</div>
                        <div class="enhanced-quiz-option" data-correct="false">Reducing the amount of data needed</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Perfect!</strong> Ensemble methods address the core limitation that single models have only one perspective on the data. By combining multiple models, we can leverage their different strengths and reduce individual weaknesses.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>
</html>