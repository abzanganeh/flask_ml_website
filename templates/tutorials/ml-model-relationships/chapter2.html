<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2: Foundation Models & Problems - ML Model Relationships</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/ml-model-relationships.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/nlp/nlp.css') }}">
    <style>
        /* Chapter 2 Specific Styles */
        .model-demo {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }
        
        .model-demo::before {
            content: "Interactive Model Demo";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #0ea5e9;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .parameter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .parameter-control {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .parameter-control label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #334155;
        }
        
        .parameter-control input[type="range"] {
            width: 100%;
            margin: 0.5rem 0;
        }
        
        .parameter-value {
            display: inline-block;
            background: #0ea5e9;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-left: 0.5rem;
        }
        
        .visualization-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
            align-items: start;
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .chart-container h4 {
            color: #1e40af;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .chart-placeholder {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64748b;
            font-weight: 500;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .chart-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .problem-highlight {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            position: relative;
        }
        
        .problem-highlight::before {
            content: "⚠️ Problem Identified";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #f59e0b;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .model-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .model-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .model-card.linear {
            border-color: #10b981;
        }
        
        .model-card.tree {
            border-color: #f59e0b;
        }
        
        .model-card h4 {
            color: #1f2937;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .pros-cons-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .pros, .cons {
            padding: 1rem;
            border-radius: 8px;
        }
        
        .pros {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 1px solid #10b981;
        }
        
        .cons {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            border: 1px solid #ef4444;
        }
        
        .pros h5 {
            color: #065f46;
            margin-bottom: 0.5rem;
        }
        
        .cons h5 {
            color: #991b1b;
            margin-bottom: 0.5rem;
        }
        
        .metric-display {
            display: flex;
            justify-content: space-around;
            margin: 1rem 0;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .metric {
            text-align: center;
        }
        
        .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1e40af;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: #64748b;
        }
        
        .overfitting-demo {
            position: relative;
            margin: 2rem 0;
        }
        
        .complexity-slider {
            width: 100%;
            margin: 1rem 0;
        }
        
        .dataset-selector {
            display: flex;
            gap: 1rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .dataset-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .dataset-btn:hover, .dataset-btn.active {
            border-color: #0ea5e9;
            background: #0ea5e9;
            color: white;
        }
        
        @media (max-width: 768px) {
            .visualization-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .parameter-controls {
                grid-template-columns: 1fr;
            }
            
            .model-comparison {
                grid-template-columns: 1fr;
            }
            
            .pros-cons-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Enhanced Quiz Styles */
        .enhanced-quiz-container {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid #e5e7eb;
        }

        .enhanced-quiz-question h4 {
            color: #1f2937;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .enhanced-quiz-option {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            color: #374151;
        }

        .enhanced-quiz-option:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .enhanced-quiz-option.selected {
            background: #dbeafe;
            border-color: #3b82f6;
            color: #1e40af;
            font-weight: 600;
        }

        .enhanced-quiz-option.correct {
            background: #dcfce7;
            border-color: #22c55e;
            color: #15803d;
            font-weight: 600;
        }

        .enhanced-quiz-option.incorrect {
            background: #fee2e2;
            border-color: #ef4444;
            color: #dc2626;
            font-weight: 600;
        }

        .enhanced-quiz-explanation {
            display: none;
            background: #f0f9ff;
            border: 1px solid #0ea5e9;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            color: #0c4a6e;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav" style="top: 50px;">
            <div class="azbn-container" style="display: flex; justify-content: space-between; align-items: center;">
                <a href="/tutorials/ml-model-relationships" style="text-decoration: none; color: #4f46e5; display: flex; align-items: center; gap: 0.5rem;">
                    <span>ML Model Relationships</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main style="padding-top: 100px;">
        <!-- Tutorial Header -->
        <div class="nlp-header">
            <h1>Chapter 2: Foundation Models & Their Problems</h1>
            <p>Understanding the building blocks of ML and the fundamental problems that led to advanced techniques</p>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 25%;"></div>
            </div>
        </div>

        <!-- Course Navigation -->
        <div class="course-nav">
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter1'">Chapter 1</button>
            <button class="nav-btn active" onclick="window.location.href='/tutorials/ml-model-relationships/chapter2'">Chapter 2</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter3'">Chapter 3</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter4'">Chapter 4</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter5'">Chapter 5</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter6'">Chapter 6</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter7'">Chapter 7</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter8'">Chapter 8</button>
        </div>

        <section class="azbn-section">
            <div class="azbn-container chapter1-container">

                <div class="progress-tracker">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>

                <div class="section-nav">
                    <button class="active" onclick="showSection('overview')">Overview</button>
                    <button onclick="showSection('linear')">Linear Models</button>
                    <button onclick="showSection('trees')">Decision Trees</button>
                    <button onclick="showSection('problems')">The Problems</button>
                    <button onclick="showSection('quiz')">Quiz</button>
                </div>

                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <h2>Why Foundation Models Matter</h2>
                    <p>
                        Before diving into advanced techniques like XGBoost and Random Forests, we need to understand 
                        the foundation models they're built upon. These simple models reveal fundamental problems 
                        that drive innovation in machine learning.
                    </p>
                    
                    <div class="azbn-card">
                        <h3>The Two Pillars of ML</h3>
                        <p>Most machine learning algorithms build upon two fundamental approaches:</p>
                        <div class="model-comparison">
                            <div class="model-card linear">
                                <h4>📈 Linear Models</h4>
                                <p><strong>Core Idea:</strong> Fit a straight line (or hyperplane) through data</p>
                                <p><strong>Examples:</strong> Linear Regression, Logistic Regression</p>
                                <p><strong>Strength:</strong> Simple, fast, interpretable</p>
                                <p><strong>Weakness:</strong> Can't capture complex patterns</p>
                            </div>
                            
                            <div class="model-card tree">
                                <h4>🌳 Tree Models</h4>
                                <p><strong>Core Idea:</strong> Create decision rules by splitting data</p>
                                <p><strong>Examples:</strong> Decision Trees, Rule-based systems</p>
                                <p><strong>Strength:</strong> Captures complex patterns, interpretable</p>
                                <p><strong>Weakness:</strong> Prone to overfitting</p>
                            </div>
                        </div>
                    </div>

                    <h3>The Journey We'll Take</h3>
                    <p>In this chapter, you'll discover:</p>
                    <ul>
                        <li>How linear models work and their bias-variance tradeoff</li>
                        <li>Why decision trees overfit and how complexity affects performance</li>
                        <li>Interactive demos showing these problems in action</li>
                        <li>Why these problems led to regularization and ensemble methods</li>
                    </ul>

                    <div class="interactive-demo">
                        <h4>Foundation Model Selector</h4>
                        <p>Choose your data characteristics to see which foundation model works best:</p>
                        
                        <div class="parameter-controls">
                            <div class="parameter-control">
                                <label>Data Complexity:</label>
                                <input type="range" id="data-complexity" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="complexity-value">3</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Dataset Size:</label>
                                <input type="range" id="data-size" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="size-value">3</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Interpretability Need:</label>
                                <input type="range" id="interpretability" min="1" max="5" value="3" oninput="updateModelRecommendation()">
                                <span class="parameter-value" id="interp-value">3</span>
                            </div>
                        </div>
                        
                        <div id="model-recommendation" style="margin: 1rem 0; padding: 1rem; background: white; border-radius: 8px;">
                            <h5>Recommended Model:</h5>
                            <div id="recommendation-details"></div>
                        </div>
                    </div>
                </div>

                <!-- Linear Models Section -->
                <div id="linear" class="content-section">
                    <h2>Linear Models: Simple but Powerful</h2>
                    <p>
                        Linear models are the foundation of machine learning. Despite their simplicity, 
                        they reveal fundamental concepts that apply to all ML algorithms.
                    </p>

                    <div class="visualization-container">
                        <div class="chart-container">
                            <h4>Linear Regression Demo</h4>
                            <img src="/static/images/tutorials/ml-model-relationships/chapter2/linear-regression-demo.png" 
                                 alt="Linear regression visualization showing data points and fitted line with bias-variance tradeoff"
                                 class="chart-image">
                        </div>
                        
                        <div>
                            <h4>Interactive Parameters</h4>
                            <div class="parameter-controls">
                                <div class="parameter-control">
                                    <label>Model Complexity:</label>
                                    <input type="range" id="linear-complexity" min="1" max="10" value="1" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="linear-complexity-value">1</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Noise Level:</label>
                                    <input type="range" id="noise-level" min="0" max="10" value="3" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="noise-value">3</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Training Size:</label>
                                    <input type="range" id="training-size" min="10" max="1000" value="100" step="10" oninput="updateLinearModel()">
                                    <span class="parameter-value" id="training-size-value">100</span>
                                </div>
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="bias-metric">0.15</div>
                                    <div class="metric-label">Bias</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="variance-metric">0.08</div>
                                    <div class="metric-label">Variance</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="total-error">0.23</div>
                                    <div class="metric-label">Total Error</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="model-demo">
                        <h4>The Bias-Variance Tradeoff</h4>
                        <p>Linear models demonstrate the fundamental bias-variance tradeoff in machine learning:</p>
                        
                        <div class="pros-cons-grid">
                            <div class="pros">
                                <h5>Low Variance</h5>
                                <ul>
                                    <li>Consistent predictions across different datasets</li>
                                    <li>Not sensitive to small data changes</li>
                                    <li>Reliable and stable</li>
                                </ul>
                            </div>
                            <div class="cons">
                                <h5>High Bias (Potentially)</h5>
                                <ul>
                                    <li>May be too simple for complex patterns</li>
                                    <li>Underfitting on non-linear data</li>
                                    <li>Limited model capacity</li>
                                </ul>
                            </div>
                        </div>
                        
                        <button onclick="demonstrateBiasVariance()" class="azbn-btn">Run Bias-Variance Demo</button>
                        <div id="bias-variance-results" style="margin-top: 1rem; display: none;"></div>
                    </div>

                    <div class="problem-highlight">
                        <h4>Linear Model Limitations</h4>
                        <p>As you experiment with the parameters above, you'll notice:</p>
                        <ul>
                            <li><strong>Limited Flexibility:</strong> Can't capture non-linear relationships</li>
                            <li><strong>Feature Engineering Required:</strong> Need to manually create polynomial features</li>
                            <li><strong>Assumption Heavy:</strong> Assumes linear relationship between features and target</li>
                        </ul>
                        <p><strong>This leads us to need more flexible models... like decision trees!</strong></p>
                    </div>
                </div>

                <!-- Decision Trees Section -->
                <div id="trees" class="content-section">
                    <h2>Decision Trees: Flexibility with a Cost</h2>
                    <p>
                        Decision trees solve the flexibility problem of linear models but introduce their own challenges.
                        Let's explore what makes them powerful and problematic.
                    </p>

                    <div class="visualization-container">
                        <div class="chart-container">
                            <h4>Decision Tree Overfitting</h4>
                            <img src="/static/images/tutorials/ml-model-relationships/chapter2/decision-tree-overfitting.png" 
                                 alt="Decision tree visualization showing overfitting with complex branches and poor generalization"
                                 class="chart-image">
                        </div>
                        
                        <div>
                            <h4>Tree Complexity Control</h4>
                            <div class="parameter-controls">
                                <div class="parameter-control">
                                    <label>Max Depth:</label>
                                    <input type="range" id="tree-depth" min="1" max="10" value="3" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="tree-depth-value">3</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Min Samples Split:</label>
                                    <input type="range" id="min-samples" min="2" max="50" value="10" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="min-samples-value">10</span>
                                </div>
                                
                                <div class="parameter-control">
                                    <label>Dataset Complexity:</label>
                                    <input type="range" id="tree-data-complexity" min="1" max="5" value="3" oninput="updateTreeModel()">
                                    <span class="parameter-value" id="tree-complexity-value">3</span>
                                </div>
                            </div>
                            
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="training-accuracy">0.95</div>
                                    <div class="metric-label">Training Acc</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="validation-accuracy">0.72</div>
                                    <div class="metric-label">Validation Acc</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="overfitting-score">0.23</div>
                                    <div class="metric-label">Overfitting</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="overfitting-demo">
                        <h4>Interactive Overfitting Demonstration</h4>
                        <p>See how decision tree complexity affects performance:</p>
                        
                        <div class="dataset-selector">
                            <button class="dataset-btn active" onclick="selectDataset('simple')">Simple Data</button>
                            <button class="dataset-btn" onclick="selectDataset('complex')">Complex Data</button>
                            <button class="dataset-btn" onclick="selectDataset('noisy')">Noisy Data</button>
                        </div>
                        
                        <div class="model-demo">
                            <label for="complexity-slider">Tree Complexity:</label>
                            <input type="range" id="complexity-slider" class="complexity-slider" min="1" max="10" value="3" oninput="updateComplexity()">
                            <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #64748b;">
                                <span>Simple</span>
                                <span>Complex</span>
                            </div>
                            
                            <div id="complexity-explanation" style="margin: 1rem 0; padding: 1rem; background: #f1f5f9; border-radius: 8px;">
                                <h5 id="complexity-title">Moderate Complexity (Depth: 3)</h5>
                                <p id="complexity-description">Good balance between fitting the data and generalizing to new examples.</p>
                            </div>
                        </div>
                    </div>

                    <div class="model-comparison">
                        <div class="azbn-card">
                            <h3>🎯 Decision Tree Strengths</h3>
                            <ul>
                                <li><strong>Non-linear Patterns:</strong> Can capture complex relationships</li>
                                <li><strong>Feature Interactions:</strong> Automatically finds feature combinations</li>
                                <li><strong>Interpretability:</strong> Easy to visualize decision paths</li>
                                <li><strong>No Assumptions:</strong> Works with any data distribution</li>
                                <li><strong>Mixed Data Types:</strong> Handles numerical and categorical features</li>
                            </ul>
                        </div>

                        <div class="azbn-card">
                            <h3>⚠️ Decision Tree Problems</h3>
                            <ul>
                                <li><strong>Overfitting:</strong> Memorizes training data noise</li>
                                <li><strong>Instability:</strong> Small data changes create different trees</li>
                                <li><strong>Bias:</strong> Favors features with more split points</li>
                                <li><strong>Limited Expressiveness:</strong> Axis-aligned splits only</li>
                                <li><strong>High Variance:</strong> Very sensitive to training data</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Problems Section -->
                <div id="problems" class="content-section">
                    <h2>The Fundamental Problems</h2>
                    <p>
                        Now you've seen both foundation models in action. Each has critical limitations that 
                        drive the need for more sophisticated approaches.
                    </p>

                    <div class="problem-highlight">
                        <h4>Problem #1: The Bias-Variance Tradeoff</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0;">
                            <div>
                                <h5>Linear Models</h5>
                                <p><strong>High Bias, Low Variance</strong></p>
                                <ul>
                                    <li>Consistent but potentially inaccurate</li>
                                    <li>Underfits complex patterns</li>
                                    <li>Limited model capacity</li>
                                </ul>
                            </div>
                            <div>
                                <h5>Decision Trees</h5>
                                <p><strong>Low Bias, High Variance</strong></p>
                                <ul>
                                    <li>Flexible but inconsistent</li>
                                    <li>Overfits to training data</li>
                                    <li>Unstable predictions</li>
                                </ul>
                            </div>
                        </div>
                        <p><strong>Solution Preview:</strong> Regularization techniques (L1/L2) and Ensemble methods balance this tradeoff!</p>
                    </div>

                    <div class="problem-highlight">
                        <h4>Problem #2: Single Model Limitations</h4>
                        <p>Both foundation models suffer from being "single" models:</p>
                        <ul>
                            <li><strong>Limited Perspective:</strong> Each model has one way of looking at data</li>
                            <li><strong>Sensitive to Data:</strong> Small changes can dramatically affect results</li>
                            <li><strong>Error Propagation:</strong> If the model is wrong, it's completely wrong</li>
                        </ul>
                        <p><strong>Solution Preview:</strong> Ensemble methods combine multiple models to overcome individual limitations!</p>
                    </div>

                    <div class="interactive-demo">
                        <h4>Problem Demonstration</h4>
                        <p>See how the same data affects different models:</p>
                        
                        <div class="parameter-controls">
                            <div class="parameter-control">
                                <label>Add Noise to Data:</label>
                                <input type="range" id="demo-noise" min="0" max="10" value="0" oninput="updateProblemDemo()">
                                <span class="parameter-value" id="demo-noise-value">0</span>
                            </div>
                            
                            <div class="parameter-control">
                                <label>Data Complexity:</label>
                                <input type="range" id="demo-complexity" min="1" max="5" value="1" oninput="updateProblemDemo()">
                                <span class="parameter-value" id="demo-complexity-value">1</span>
                            </div>
                        </div>
                        
                        <div class="model-comparison">
                            <div class="metric-display">
                                <div class="metric">
                                    <div class="metric-value" id="linear-performance">0.85</div>
                                    <div class="metric-label">Linear Model</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="tree-performance">0.72</div>
                                    <div class="metric-label">Decision Tree</div>
                                </div>
                                <div class="metric">
                                    <div class="metric-value" id="ensemble-preview">0.91</div>
                                    <div class="metric-label">Ensemble (Preview)</div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="problem-explanation" style="margin: 1rem 0; padding: 1rem; background: #f8fafc; border-radius: 8px;">
                            <p>Notice how the ensemble consistently outperforms individual models!</p>
                        </div>
                    </div>

                    <div class="azbn-card">
                        <h3>What's Coming Next</h3>
                        <p>Now that you understand the fundamental problems, you're ready to see how the ML community solved them:</p>
                        <ul>
                            <li><strong>Chapter 3:</strong> Regularization techniques (L1/L2) that control overfitting</li>
                            <li><strong>Chapter 4-6:</strong> Ensemble methods that combine multiple models</li>
                            <li><strong>Chapter 7:</strong> XGBoost - the optimized implementation that wins competitions</li>
                        </ul>
                        <p>Each solution directly addresses the problems you've discovered in this chapter!</p>
                    </div>
                </div>

                <!-- Quiz Section -->
                <div id="quiz" class="content-section">
                    <h2>Chapter 2 Quiz</h2>
                    <p>Test your understanding of foundation models and their problems:</p>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz1">
                        <div class="enhanced-quiz-question">
                            <h4>Question 1: What is the main tradeoff between linear models and decision trees?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">Linear models are always better</div>
                        <div class="enhanced-quiz-option" data-correct="true">Linear models have high bias/low variance, decision trees have low bias/high variance</div>
                        <div class="enhanced-quiz-option" data-correct="false">Decision trees are always more accurate</div>
                        <div class="enhanced-quiz-option" data-correct="false">There is no tradeoff</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Correct!</strong> This is the fundamental bias-variance tradeoff. Linear models are consistent but potentially too simple (high bias), while decision trees are flexible but unstable (high variance).
                        </div>
                    </div>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz2">
                        <div class="enhanced-quiz-question">
                            <h4>Question 2: Why do decision trees tend to overfit?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">They are too simple</div>
                        <div class="enhanced-quiz-option" data-correct="false">They can't capture complex patterns</div>
                        <div class="enhanced-quiz-option" data-correct="true">They can memorize training data by creating very specific rules</div>
                        <div class="enhanced-quiz-option" data-correct="false">They require too much data</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Exactly!</strong> Decision trees can keep splitting until they perfectly classify every training example, essentially memorizing the data rather than learning generalizable patterns.
                        </div>
                    </div>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter2-quiz3">
                        <div class="enhanced-quiz-question">
                            <h4>Question 3: Which problem do ensemble methods primarily solve?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">Making models run faster</div>
                        <div class="enhanced-quiz-option" data-correct="true">Reducing the limitations of single models by combining multiple models</div>
                        <div class="enhanced-quiz-option" data-correct="false">Making models more interpretable</div>
                        <div class="enhanced-quiz-option" data-correct="false">Reducing the amount of data needed</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Perfect!</strong> Ensemble methods address the core limitation that single models have only one perspective on the data. By combining multiple models, we can leverage their different strengths and reduce individual weaknesses.
                        </div>
                    </div>
                </div>


            </div>
        </section>
    </main>

    <script>
        let quizAnswers = {};
        let currentDataset = 'simple';
        
        // Section Navigation
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionName).classList.add('active');
            
            document.querySelectorAll('.section-nav button').forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Model Recommendation System
        function updateModelRecommendation() {
            const complexity = parseInt(document.getElementById('data-complexity').value);
            const size = parseInt(document.getElementById('data-size').value);
            const interpretability = parseInt(document.getElementById('interpretability').value);
            
            // Update display values
            document.getElementById('complexity-value').textContent = complexity;
            document.getElementById('size-value').textContent = size;
            document.getElementById('interp-value').textContent = interpretability;
            
            const details = document.getElementById('recommendation-details');
            let recommendation = '';
            
            if (complexity <= 2 && interpretability >= 4) {
                recommendation = '<strong>Linear Regression</strong><br>Your data is simple and you need interpretability. Linear models are perfect!';
            } else if (complexity >= 4 && size >= 3 && interpretability <= 2) {
                recommendation = '<strong>Decision Tree (with ensemble later)</strong><br>Complex data needs flexible models, but single trees will overfit. Consider Random Forest!';
            } else if (interpretability >= 4) {
                recommendation = '<strong>Simple Decision Tree</strong><br>High interpretability need suggests a shallow tree with clear rules.';
            } else {
                recommendation = '<strong>Hybrid Approach</strong><br>Try both models and compare! This is common in real projects.';
            }
            
            details.innerHTML = recommendation;
        }

        // Linear Model Interactive Demo
        function updateLinearModel() {
            const complexity = parseInt(document.getElementById('linear-complexity').value);
            const noise = parseInt(document.getElementById('noise-level').value);
            const size = parseInt(document.getElementById('training-size').value);
            
            // Update display values
            document.getElementById('linear-complexity-value').textContent = complexity;
            document.getElementById('noise-value').textContent = noise;
            document.getElementById('training-size-value').textContent = size;
            
            // Simulate bias-variance calculations
            const bias = Math.max(0.05, 0.4 - (complexity * 0.03));
            const variance = Math.max(0.02, (complexity * 0.04) + (noise * 0.01) - (size * 0.00005));
            const totalError = bias + variance + (noise * 0.02);
            
            document.getElementById('bias-metric').textContent = bias.toFixed(3);
            document.getElementById('variance-metric').textContent = variance.toFixed(3);
            document.getElementById('total-error').textContent = totalError.toFixed(3);
        }

        // Decision Tree Interactive Demo
        function updateTreeModel() {
            const depth = parseInt(document.getElementById('tree-depth').value);
            const minSamples = parseInt(document.getElementById('min-samples').value);
            const dataComplexity = parseInt(document.getElementById('tree-data-complexity').value);
            
            // Update display values
            document.getElementById('tree-depth-value').textContent = depth;
            document.getElementById('min-samples-value').textContent = minSamples;
            document.getElementById('tree-complexity-value').textContent = dataComplexity;
            
            // Simulate overfitting behavior
            const trainingAcc = Math.min(0.99, 0.7 + (depth * 0.05) - (minSamples * 0.003));
            const validationAcc = Math.max(0.6, Math.min(0.95, 0.65 + (dataComplexity * 0.05) - (depth * 0.03) + (minSamples * 0.002)));
            const overfitting = Math.max(0, trainingAcc - validationAcc);
            
            document.getElementById('training-accuracy').textContent = trainingAcc.toFixed(2);
            document.getElementById('validation-accuracy').textContent = validationAcc.toFixed(2);
            document.getElementById('overfitting-score').textContent = overfitting.toFixed(2);
        }

        // Dataset Selection
        function selectDataset(dataset) {
            document.querySelectorAll('.dataset-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            currentDataset = dataset;
            updateComplexity();
        }

        // Complexity Slider Demo
        function updateComplexity() {
            const complexity = parseInt(document.getElementById('complexity-slider').value);
            const title = document.getElementById('complexity-title');
            const description = document.getElementById('complexity-description');
            
            if (complexity <= 2) {
                title.textContent = `Simple Tree (Depth: ${complexity})`;
                description.textContent = 'May underfit complex patterns but generalizes well to new data.';
            } else if (complexity <= 6) {
                title.textContent = `Moderate Complexity (Depth: ${complexity})`;
                description.textContent = 'Good balance between fitting the data and generalizing to new examples.';
            } else {
                title.textContent = `High Complexity (Depth: ${complexity})`;
                description.textContent = 'Likely to overfit - memorizes training data but performs poorly on new data.';
            }
        }

        // Bias-Variance Demonstration
        function demonstrateBiasVariance() {
            const results = document.getElementById('bias-variance-results');
            results.style.display = 'block';
            results.innerHTML = `
                <h5>Bias-Variance Demonstration Results:</h5>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                    <div style="background: #f0f9ff; padding: 1rem; border-radius: 8px;">
                        <h6>Linear Model (10 runs)</h6>
                        <p>Predictions: [2.1, 2.0, 2.1, 2.0, 2.1, 2.0, 2.1, 2.0, 2.1, 2.0]</p>
                        <p><strong>Variance: Low</strong> - Consistent predictions</p>
                        <p><strong>Bias: Medium</strong> - May miss true relationship</p>
                    </div>
                    <div style="background: #fef3c7; padding: 1rem; border-radius: 8px;">
                        <h6>Deep Tree (10 runs)</h6>
                        <p>Predictions: [1.8, 2.5, 1.9, 2.7, 1.6, 2.8, 2.0, 2.4, 1.7, 2.6]</p>
                        <p><strong>Variance: High</strong> - Predictions vary widely</p>
                        <p><strong>Bias: Low</strong> - Can capture true relationship</p>
                    </div>
                </div>
            `;
        }

        // Problem Demonstration
        function updateProblemDemo() {
            const noise = parseInt(document.getElementById('demo-noise').value);
            const complexity = parseInt(document.getElementById('demo-complexity').value);
            
            document.getElementById('demo-noise-value').textContent = noise;
            document.getElementById('demo-complexity-value').textContent = complexity;
            
            // Simulate performance under different conditions
            const linearPerf = Math.max(0.6, 0.9 - (complexity * 0.08) - (noise * 0.02));
            const treePerf = Math.max(0.5, 0.85 + (complexity * 0.02) - (noise * 0.05));
            const ensemblePerf = Math.max(0.7, Math.max(linearPerf, treePerf) + 0.05 - (noise * 0.01));
            
            document.getElementById('linear-performance').textContent = linearPerf.toFixed(2);
            document.getElementById('tree-performance').textContent = treePerf.toFixed(2);
            document.getElementById('ensemble-preview').textContent = ensemblePerf.toFixed(2);
        }

        // Enhanced Quiz functionality
        function selectQuizOption(optionElement) {
            const quizContainer = optionElement.closest('.enhanced-quiz-container');
            const options = quizContainer.querySelectorAll('.enhanced-quiz-option');
            const explanation = quizContainer.querySelector('.enhanced-quiz-explanation');
            
            // Remove previous selections
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Mark selected option
            optionElement.classList.add('selected');
            
            // Check if correct
            const isCorrect = optionElement.getAttribute('data-correct') === 'true';
            
            if (isCorrect) {
                optionElement.classList.add('correct');
                explanation.style.display = 'block';
            } else {
                optionElement.classList.add('incorrect');
                // Show correct answer
                const correctOption = quizContainer.querySelector('.enhanced-quiz-option[data-correct="true"]');
                if (correctOption) {
                    correctOption.classList.add('correct');
                }
                explanation.style.display = 'block';
            }
        }

        // Initialize enhanced quiz system
        function initializeEnhancedQuiz() {
            document.querySelectorAll('.enhanced-quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectQuizOption(this);
                });
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updateModelRecommendation();
            updateLinearModel();
            updateTreeModel();
            updateProblemDemo();
            
            // Initialize enhanced quiz system
            initializeEnhancedQuiz();
        });
    </script>
</body>
</html>