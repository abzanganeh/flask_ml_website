<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Gradient Boosting Mastery - ML Model Relationships</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/ml-model-relationships.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/chapter6.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/nlp/nlp.css') }}">
    <script src="{{ url_for('static', filename='js/tutorials/ml-model-relationships/shared-tutorial.js') }}"></script>
    <script src="{{ url_for('static', filename='js/tutorials/ml-model-relationships/chapter6.js') }}"></script>
</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav" style="top: 50px;">
            <div class="azbn-container" style="display: flex; justify-content: space-between; align-items: center;">
                <a href="/tutorials/ml-model-relationships" style="text-decoration: none; color: #4f46e5; display: flex; align-items: center; gap: 0.5rem;">
                    <span>ML Model Relationships</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main style="padding-top: 100px;">
        <!-- Tutorial Header -->
        <div class="nlp-header">
            <h1>Chapter 6: Gradient Boosting Mastery</h1>
            <p>Master sequential learning through interactive gradient boosting demonstrations and residual analysis</p>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 75%;"></div>
            </div>
        </div>

        <!-- Course Navigation -->
        <div class="course-nav">
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter1'">Chapter 1</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter2'">Chapter 2</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter3'">Chapter 3</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter4'">Chapter 4</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter5'">Chapter 5</button>
            <button class="nav-btn active" onclick="window.location.href='/tutorials/ml-model-relationships/chapter6'">Chapter 6</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter7'">Chapter 7</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter8'">Chapter 8</button>
        </div>

        <section class="azbn-section">
            <div class="azbn-container chapter1-container">

                <div class="progress-tracker">
                    <div class="progress-dot" title="Overview"></div>
                    <div class="progress-dot" title="Sequential Learning"></div>
                    <div class="progress-dot" title="Residual Analysis"></div>
                    <div class="progress-dot" title="vs Random Forest"></div>
                    <div class="progress-dot" title="Quiz"></div>
                </div>

                <div class="section-nav">
                    <button class="active" onclick="showSection('overview')">Overview</button>
                    <button onclick="showSection('sequential')">Sequential Learning</button>
                    <button onclick="showSection('residuals')">Residual Analysis</button>
                    <button onclick="showSection('comparison')">vs Random Forest</button>
                    <button onclick="showSection('quiz')">Quiz</button>
                </div>

                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <h2>Gradient Boosting: Learning from Mistakes</h2>
                    <p>
                        Unlike Random Forest which trains trees independently, Gradient Boosting trains them 
                        sequentially, with each new tree focused on correcting the errors of previous trees.
                    </p>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <img src="/static/images/tutorials/ml-model-relationships/chapter6/sequential-learning.png" 
                             alt="Sequential learning visualization showing how gradient boosting models learn from previous mistakes"
                             style="width: 100%; max-width: 800px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                    </div>
                    
                    <div class="azbn-card">
                        <h3>The Core Principle</h3>
                        <p>Gradient Boosting follows a simple but powerful strategy:</p>
                        
                        <div class="math-formula">
                            F<sub>m</sub>(x) = F<sub>m-1</sub>(x) + α × h<sub>m</sub>(x)
                        </div>
                        
                        <p>Where:</p>
                        <ul>
                            <li><strong>F<sub>m</sub>(x)</strong> = Current ensemble prediction</li>
                            <li><strong>F<sub>m-1</sub>(x)</strong> = Previous ensemble prediction</li>
                            <li><strong>α</strong> = Learning rate (how much to trust the new model)</li>
                            <li><strong>h<sub>m</sub>(x)</strong> = New weak learner trained on residuals</li>
                        </ul>
                    </div>

                    <div class="boosting-demo">
                        <h4>Interactive Gradient Boosting Overview</h4>
                        <p>Watch how prediction accuracy improves with each boosting round:</p>
                        
                        <div class="learning-controls">
                            <div class="learning-control">
                                <label for="overview-rounds">Boosting Rounds:</label>
                                <input type="range" id="overview-rounds" min="1" max="20" value="1" oninput="updateOverviewDemo()">
                                <span class="control-value" id="overview-rounds-value">1</span>
                            </div>
                            
                            <div class="learning-control">
                                <label for="overview-learning-rate">Learning Rate:</label>
                                <input type="range" id="overview-learning-rate" min="0.1" max="1.0" value="0.3" step="0.1" oninput="updateOverviewDemo()">
                                <span class="control-value" id="overview-learning-rate-value">0.3</span>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                            <div style="text-align: center; background: white; padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.8rem; font-weight: bold; color: #ea580c;" id="current-error">0.35</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Current Error</div>
                            </div>
                            
                            <div style="text-align: center; background: white; padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.8rem; font-weight: bold; color: #22c55e;" id="improvement">-15%</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Improvement</div>
                            </div>
                            
                            <div style="text-align: center; background: white; padding: 1rem; border-radius: 8px;">
                                <div style="font-size: 1.8rem; font-weight: bold; color: #3b82f6;" id="models-used">1</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Models Used</div>
                            </div>
                        </div>
                        
                        <div id="overview-explanation" style="background: white; padding: 1rem; border-radius: 8px;">
                            <h5>Round 1: Initial Model</h5>
                            <p>First weak learner makes basic predictions. Error is high but we're just getting started!</p>
                        </div>
                    </div>

                    <div class="gradient-explanation">
                        <h4>Why "Gradient" Boosting?</h4>
                        <p>The name comes from gradient descent optimization:</p>
                        <ul>
                            <li><strong>Gradient:</strong> Direction of steepest increase in loss function</li>
                            <li><strong>Negative Gradient:</strong> Direction to minimize loss (residuals)</li>
                            <li><strong>Each model:</strong> Trained to predict negative gradients (residuals)</li>
                            <li><strong>Result:</strong> Ensemble moves in direction that minimizes loss</li>
                        </ul>
                    </div>
                </div>

                <!-- Sequential Learning Section -->
                <div id="sequential" class="content-section">
                    <h2>Sequential Learning in Action</h2>
                    <p>
                        Watch how gradient boosting builds models step-by-step, with each model 
                        learning from the mistakes of all previous models.
                    </p>

                    <div class="boosting-demo">
                        <h4>Step-by-Step Boosting Process</h4>
                        <p>Control the learning process and see how each round improves predictions:</p>
                        
                        <div class="learning-controls">
                            <div class="learning-control">
                                <label for="sequential-rounds">Current Round:</label>
                                <input type="range" id="sequential-rounds" min="1" max="10" value="1" oninput="updateSequentialDemo()">
                                <span class="control-value" id="sequential-rounds-value">1</span>
                            </div>
                            
                            <div class="learning-control">
                                <label for="weak-learner-type">Weak Learner Type:</label>
                                <select id="weak-learner-type" onchange="updateSequentialDemo()" style="width: 100%; padding: 0.5rem; border-radius: 4px;">
                                    <option value="stumps">Decision Stumps</option>
                                    <option value="shallow">Shallow Trees</option>
                                    <option value="linear">Linear Models</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="sequential-flow" id="sequential-flow">
                            <!-- Sequential rounds will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="weak-learner-demo">
                        <h4>Weak Learners: The Building Blocks</h4>
                        <p>Gradient boosting typically uses simple "weak" learners. Click to see different types:</p>
                        
                        <div class="learner-grid">
                            <div class="weak-learner selected" onclick="selectWeakLearner('stump')">
                                <h5>Decision Stump</h5>
                                <div class="learner-accuracy">55%</div>
                                <p>Single split tree</p>
                                <p style="font-size: 0.8rem; color: #64748b;">Most common choice</p>
                            </div>
                            
                            <div class="weak-learner" onclick="selectWeakLearner('shallow')">
                                <h5>Shallow Tree</h5>
                                <div class="learner-accuracy">62%</div>
                                <p>Depth 2-6 tree</p>
                                <p style="font-size: 0.8rem; color: #64748b;">Good for interactions</p>
                            </div>
                            
                            <div class="weak-learner" onclick="selectWeakLearner('linear')">
                                <h5>Linear Model</h5>
                                <div class="learner-accuracy">58%</div>
                                <p>Simple linear regression</p>
                                <p style="font-size: 0.8rem; color: #64748b;">Fast and interpretable</p>
                            </div>
                        </div>
                        
                        <div id="weak-learner-explanation" style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            <h5>Decision Stumps</h5>
                            <p>Simple one-level decision trees that make a single split. They're weak individually but powerful when combined through boosting. Each stump slightly improves overall predictions.</p>
                        </div>
                    </div>
                </div>

                <!-- Residuals Section -->
                <div id="residuals" class="content-section">
                    <h2>Residual Analysis: Learning from Errors</h2>
                    <p>
                        The key to gradient boosting's success is its focus on residuals - 
                        the differences between actual and predicted values.
                    </p>

                    <div style="text-align: center; margin: 2rem 0;">
                        <img src="/static/images/tutorials/ml-model-relationships/chapter6/loss-function-progression.png" 
                             alt="Loss function progression chart showing decreasing error across boosting iterations"
                             style="width: 100%; max-width: 700px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                    </div>

                    <div class="boosting-demo">
                        <h4>Interactive Residual Visualization</h4>
                        <p>See how residuals shrink as more models are added:</p>
                        
                        <div style="margin: 1.5rem 0;">
                            <label for="residual-round">Boosting Round:</label>
                            <input type="range" id="residual-round" min="0" max="15" value="0" oninput="updateResidualVisualization()">
                            <span class="control-value" id="residual-round-value">0</span>
                        </div>
                        
                        <div class="residual-visualization" id="residual-bars">
                            <!-- Residual bars will be generated by JavaScript -->
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin: 1rem 0;">
                            <div style="text-align: center; background: white; padding: 0.75rem; border-radius: 6px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #ef4444;" id="large-residuals">10</div>
                                <div style="font-size: 0.8rem; color: #64748b;">Large Errors</div>
                            </div>
                            <div style="text-align: center; background: white; padding: 0.75rem; border-radius: 6px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #22c55e;" id="small-residuals">0</div>
                                <div style="font-size: 0.8rem; color: #64748b;">Small Errors</div>
                            </div>
                            <div style="text-align: center; background: white; padding: 0.75rem; border-radius: 6px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #3b82f6;" id="avg-residual">0.42</div>
                                <div style="font-size: 0.8rem; color: #64748b;">Avg Error</div>
                            </div>
                        </div>
                        
                        <div id="residual-explanation" style="background: white; padding: 1rem; border-radius: 8px;">
                            <h5>Round 0: Initial Residuals</h5>
                            <p>Starting with large residuals everywhere. Each subsequent model will focus on reducing these errors.</p>
                        </div>
                    </div>

                    <div class="loss-chart">
                        <h4>Loss Function Progression</h4>
                        <p>Watch how the loss decreases with each boosting iteration:</p>
                        
                        <div class="loss-progression">
                            <div class="loss-curve" id="loss-curve">
                                <!-- Loss points will be generated by JavaScript -->
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                            <span style="font-size: 0.9rem; color: #64748b;">Round 1</span>
                            <span style="font-size: 0.9rem; color: #64748b;">Round 20</span>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1rem 0;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #ea580c;" id="current-loss">0.65</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Current Loss</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #22c55e;" id="loss-reduction">35%</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Reduction</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #3b82f6;" id="convergence">Fast</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Convergence</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparison Section -->
                <div id="comparison" class="content-section">
                    <h2>Random Forest vs Gradient Boosting</h2>
                    <p>
                        Understanding the key differences helps you choose the right ensemble method 
                        for your specific problem.
                    </p>

                    <div class="comparison-grid">
                        <div class="comparison-card rf-card">
                            <h4>Random Forest (Bagging)</h4>
                            <h5>Training Strategy</h5>
                            <ul>
                                <li>Parallel independent training</li>
                                <li>Bootstrap sampling</li>
                                <li>Feature randomness</li>
                                <li>Deep trees (high variance)</li>
                            </ul>
                            
                            <h5>Strengths</h5>
                            <ul>
                                <li>Less prone to overfitting</li>
                                <li>Stable and robust</li>
                                <li>Can be parallelized</li>
                                <li>Good default choice</li>
                            </ul>
                            
                            <h5>Best For</h5>
                            <ul>
                                <li>When you want stability</li>
                                <li>Large datasets</li>
                                <li>Quick, robust results</li>
                                <li>Parallel processing available</li>
                            </ul>
                        </div>
                        
                        <div class="comparison-card gb-card">
                            <h4>Gradient Boosting</h4>
                            <h5>Training Strategy</h5>
                            <ul>
                                <li>Sequential adaptive training</li>
                                <li>Focus on residuals</li>
                                <li>Learning rate control</li>
                                <li>Weak learners (low variance)</li>
                            </ul>
                            
                            <h5>Strengths</h5>
                            <ul>
                                <li>Often higher accuracy</li>
                                <li>Flexible loss functions</li>
                                <li>Handles bias well</li>
                                <li>Feature importance</li>
                            </ul>
                            
                            <h5>Best For</h5>
                            <ul>
                                <li>Maximum predictive performance</li>
                                <li>Competitions</li>
                                <li>When you can tune carefully</li>
                                <li>Structured/tabular data</li>
                            </ul>
                        </div>
                    </div>

                    <div class="azbn-card">
                        <h3>Performance Comparison on Different Problem Types</h3>
                        
                        <div style="margin: 1.5rem 0;">
                            <label for="problem-type">Problem Type:</label>
                            <select id="problem-type" onchange="updatePerformanceComparison()" style="width: 200px; padding: 0.5rem; border-radius: 4px; margin-left: 1rem;">
                                <option value="tabular">Tabular Data</option>
                                <option value="noisy">Noisy Data</option>
                                <option value="large">Large Dataset</option>
                                <option value="small">Small Dataset</option>
                                <option value="linear">Linear Patterns</option>
                            </select>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0;">
                            <div style="text-align: center; background: #f0fdf4; padding: 1.5rem; border-radius: 8px;">
                                <h5>Random Forest</h5>
                                <div style="font-size: 2rem; font-weight: bold; color: #22c55e; margin: 0.5rem 0;" id="rf-score">0.87</div>
                                <div style="font-size: 0.9rem; color: #64748b;" id="rf-description">Good stability</div>
                            </div>
                            
                            <div style="text-align: center; background: #fff7ed; padding: 1.5rem; border-radius: 8px;">
                                <h5>Gradient Boosting</h5>
                                <div style="font-size: 2rem; font-weight: bold; color: #ea580c; margin: 0.5rem 0;" id="gb-score">0.91</div>
                                <div style="font-size: 0.9rem; color: #64748b;" id="gb-description">Higher accuracy</div>
                            </div>
                        </div>
                        
                        <div id="comparison-explanation" style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                            <p><strong>Tabular Data:</strong> Gradient Boosting typically performs better on structured data due to its sequential learning approach that can capture complex patterns.</p>
                        </div>
                    </div>
                </div>

                <!-- Quiz Section -->
                <div id="quiz" class="content-section">
                    <h2>Chapter 6 Quiz</h2>
                    <p>Test your understanding of gradient boosting:</p>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter6-quiz1">
                        <div class="enhanced-quiz-question">
                            <h4>Question 1: How does gradient boosting differ from random forest in training approach?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="true">Gradient boosting trains models sequentially, each learning from previous errors</div>
                        <div class="enhanced-quiz-option" data-correct="false">Gradient boosting uses more data than random forest</div>
                        <div class="enhanced-quiz-option" data-correct="false">Gradient boosting only works with decision trees</div>
                        <div class="enhanced-quiz-option" data-correct="false">Gradient boosting requires less computational power</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Correct!</strong> The key difference is sequential vs parallel training. Gradient boosting builds models one after another, with each new model specifically trained to correct the residual errors of the ensemble so far.
                        </div>
                    </div>
                    
                    <div class="enhanced-quiz-container" data-quiz-id="chapter6-quiz2">
                        <div class="enhanced-quiz-question">
                            <h4>Question 2: What are residuals in the context of gradient boosting?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">The final predictions of the model</div>
                        <div class="enhanced-quiz-option" data-correct="true">The differences between actual values and current ensemble predictions</div>
                        <div class="enhanced-quiz-option" data-correct="false">The weights assigned to each weak learner</div>
                        <div class="enhanced-quiz-option" data-correct="false">The learning rate parameter</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Exactly!</strong> Residuals are the errors - what the current ensemble gets wrong. Each new weak learner is trained to predict these residuals, effectively learning to fix the ensemble's mistakes.
                        </div>
                    </div> 
                    
                    <div class="enhanced-quiz-container" data-quiz-id="chapter6-quiz3">
                        <div class="enhanced-quiz-question">
                            <h4>Question 3: When might you choose random forest over gradient boosting?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">When you need the highest possible accuracy</div>
                        <div class="enhanced-quiz-option" data-correct="true">When you want a stable, robust model with less risk of overfitting</div>
                        <div class="enhanced-quiz-option" data-correct="false">When you have very small datasets</div>
                        <div class="enhanced-quiz-option" data-correct="false">When you need faster prediction times</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Perfect!</strong> Random Forest is more stable and less prone to overfitting because it averages independent predictions. Gradient boosting can achieve higher accuracy but requires more careful tuning and is more sensitive to outliers and overfitting.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>
</html>