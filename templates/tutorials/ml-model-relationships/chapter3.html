<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Regularization - The Problem Solvers - ML Model Relationships</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/ml-model-relationships.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/ml-model-relationships/chapter3.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/nlp/nlp.css') }}">
    <script src="{{ url_for('static', filename='js/tutorials/clustering/shared-tutorial-python.js') }}"></script>
    <!-- Chapter-specific functionality now handled by shared-tutorial-python.js -->
</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav" style="top: 50px;">
            <div class="azbn-container" style="display: flex; justify-content: space-between; align-items: center;">
                <a href="/tutorials/ml-model-relationships" style="text-decoration: none; color: #4f46e5; display: flex; align-items: center; gap: 0.5rem;">
                    <span>ML Model Relationships</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main style="padding-top: 100px;">
        <!-- Tutorial Header -->
        <div class="nlp-header">
            <h1>Chapter 3: Regularization - The Problem Solvers</h1>
            <p>Discover how L1 and L2 regularization solve overfitting problems and when to use each technique</p>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 37.5%;"></div>
            </div>
        </div>

        <!-- Course Navigation -->
        <div class="course-nav">
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter1'">Chapter 1</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter2'">Chapter 2</button>
            <button class="nav-btn active" onclick="window.location.href='/tutorials/ml-model-relationships/chapter3'">Chapter 3</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter4'">Chapter 4</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter5'">Chapter 5</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter6'">Chapter 6</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter7'">Chapter 7</button>
            <button class="nav-btn" onclick="window.location.href='/tutorials/ml-model-relationships/chapter8'">Chapter 8</button>
        </div>

        <section class="azbn-section">
            <div class="azbn-container chapter1-container">

                <div class="progress-tracker">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>
                
                <div class="section-nav">
                    <button class="active" onclick="showSection('overview')">Overview</button>
                    <button onclick="showSection('l1-l2')">L1 vs L2</button>
                    <button onclick="showSection('path')">Regularization Path</button>
                    <button onclick="showSection('applications')">When to Use</button>
                    <button onclick="showSection('quiz')">Quiz</button>
                </div>

                <!-- Overview Section -->
                <div id="overview" class="content-section active">
                    <h2>Regularization: The Overfitting Solution</h2>
                    <p>
                        Remember the problems from Chapter 2? Linear models were too simple, decision trees were too complex. 
                        Regularization provides a mathematical way to control model complexity.
                    </p>
                    
                    <div class="azbn-card">
                        <h3>The Core Idea</h3>
                        <p>Regularization adds a <strong>penalty term</strong> to the loss function that grows with model complexity:</p>
                        
                        <div class="reg-formula">
                            Loss = Prediction Error + λ × Complexity Penalty
                        </div>
                        
                        <p>Where <strong>λ (lambda)</strong> controls how much we penalize complexity:</p>
                        <ul>
                            <li>λ = 0: No penalty (original model)</li>
                            <li>λ small: Slight penalty (minor regularization)</li>
                            <li>λ large: Heavy penalty (strong regularization)</li>
                        </ul>
                    </div>

                    <div class="regularization-demo">
                        <h4>Interactive Regularization Concept</h4>
                        <p>Adjust the regularization strength to see its effect:</p>
                        
                        <div style="margin: 1.5rem 0;">
                            <label for="lambda-demo">Regularization Strength (λ):</label>
                            <input type="range" id="lambda-demo" class="lambda-slider" min="0" max="10" value="0" step="0.1" oninput="updateRegularizationDemo()">
                            <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #64748b; margin-top: 0.5rem;">
                                <span>No Regularization</span>
                                <span id="lambda-value">0.0</span>
                                <span>Strong Regularization</span>
                            </div>
                        </div>
                        
                        <div id="regularization-effect" style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            <h5 id="effect-title">No Regularization Applied</h5>
                            <p id="effect-description">Model uses original complexity - may overfit to training data.</p>
                            <div style="display: flex; justify-content: space-around; margin: 1rem 0;">
                                <div style="text-align: center;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: #ef4444;" id="training-error">0.05</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">Training Error</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.2rem; font-weight: bold; color: #3b82f6;" id="validation-error">0.15</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">Validation Error</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3>Two Main Types</h3>
                    <p>There are two primary regularization techniques, each with different behaviors:</p>
                    
                    <div class="reg-comparison">
                        <div class="reg-type l1-reg">
                            <h4>L1 Regularization (Lasso)</h4>
                            <div class="reg-formula">
                                Penalty = λ × Σ|coefficients|
                            </div>
                            <p><strong>Effect:</strong> Drives some coefficients to exactly zero</p>
                            <p><strong>Result:</strong> Automatic feature selection</p>
                            <p><strong>Use when:</strong> You have many features and want to identify the most important ones</p>
                        </div>
                        
                        <div class="reg-type l2-reg">
                            <h4>L2 Regularization (Ridge)</h4>
                            <div class="reg-formula">
                                Penalty = λ × Σ(coefficients)²
                            </div>
                            <p><strong>Effect:</strong> Shrinks coefficients toward zero (but never exactly zero)</p>
                            <p><strong>Result:</strong> Smooth, stable predictions</p>
                            <p><strong>Use when:</strong> You want to keep all features but reduce their influence</p>
                        </div>
                    </div>
                </div>

                <!-- L1 vs L2 Section -->
                <div id="l1-l2" class="content-section">
                    <h2>L1 vs L2: The Detailed Comparison</h2>
                    <p>
                        The difference between L1 and L2 regularization isn't just mathematical - it has profound practical implications.
                    </p>

                    <div style="text-align: center; margin: 2rem 0;">
                        <img src="/static/images/tutorials/ml-model-relationships/chapter3/l1-vs-l2-comparison.png" 
                             alt="Side-by-side comparison of L1 and L2 regularization effects on feature selection"
                             style="width: 100%; max-width: 800px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                    </div>

                    <div class="regularization-demo">
                        <h4>Interactive L1 vs L2 Demonstration</h4>
                        <p>See how different regularization types affect feature coefficients:</p>
                        
                        <div class="interactive-selector">
                            <button class="selector-btn active" onclick="selectRegularization('l1')">L1 Regularization</button>
                            <button class="selector-btn" onclick="selectRegularization('l2')">L2 Regularization</button>
                            <button class="selector-btn" onclick="selectRegularization('none')">No Regularization</button>
                        </div>
                        
                        <div style="margin: 1.5rem 0;">
                            <label for="reg-strength">Regularization Strength:</label>
                            <input type="range" id="reg-strength" min="0" max="10" value="3" step="0.5" oninput="updateFeatureCoefficients()">
                            <span id="reg-strength-value">3.0</span>
                        </div>
                        
                        <div class="coefficient-display">
                            <div class="coefficient-card" id="coef-1">
                                <div class="coefficient-value">0.8</div>
                                <div class="coefficient-label">Feature 1</div>
                            </div>
                            <div class="coefficient-card" id="coef-2">
                                <div class="coefficient-value">0.6</div>
                                <div class="coefficient-label">Feature 2</div>
                            </div>
                            <div class="coefficient-card" id="coef-3">
                                <div class="coefficient-value">0.4</div>
                                <div class="coefficient-label">Feature 3</div>
                            </div>
                            <div class="coefficient-card" id="coef-4">
                                <div class="coefficient-value">0.2</div>
                                <div class="coefficient-label">Feature 4</div>
                            </div>
                            <div class="coefficient-card" id="coef-5">
                                <div class="coefficient-value">0.1</div>
                                <div class="coefficient-label">Feature 5</div>
                            </div>
                        </div>
                        
                        <div id="regularization-explanation" style="background: white; padding: 1rem; border-radius: 8px;">
                            <h5 id="reg-explanation-title">L1 Regularization Active</h5>
                            <p id="reg-explanation-text">L1 is driving smaller coefficients toward zero, effectively removing less important features.</p>
                        </div>
                    </div>

                    <div class="azbn-card">
                        <h3>Key Differences Explained</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1rem 0;">
                            <div>
                                <h4 style="color: #ef4444;">L1 Regularization (Lasso)</h4>
                                <ul>
                                    <li><strong>Sparsity:</strong> Creates sparse models (many zeros)</li>
                                    <li><strong>Feature Selection:</strong> Automatically selects features</li>
                                    <li><strong>Interpretability:</strong> Easier to understand (fewer features)</li>
                                    <li><strong>Instability:</strong> Can be unstable with correlated features</li>
                                    <li><strong>Use Case:</strong> High-dimensional data with irrelevant features</li>
                                </ul>
                            </div>
                            
                            <div>
                                <h4 style="color: #3b82f6;">L2 Regularization (Ridge)</h4>
                                <ul>
                                    <li><strong>Shrinkage:</strong> Shrinks all coefficients uniformly</li>
                                    <li><strong>Stability:</strong> More stable with correlated features</li>
                                    <li><strong>Smoothness:</strong> Produces smooth, stable predictions</li>
                                    <li><strong>No Selection:</strong> Keeps all features (with reduced weights)</li>
                                    <li><strong>Use Case:</strong> When all features might be relevant</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Regularization Path Section -->
                <div id="path" class="content-section">
                    <h2>The Regularization Path</h2>
                    <p>
                        Understanding how coefficients change as we increase regularization strength is crucial 
                        for choosing the right λ value.
                    </p>

                    <div style="text-align: center; margin: 2rem 0;">
                        <img src="/static/images/tutorials/ml-model-relationships/chapter3/regularization-path.png" 
                             alt="Regularization path plot showing how coefficients change with regularization strength"
                             style="width: 100%; max-width: 800px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.15);">
                    </div>

                    <div class="path-visualization">
                        <h4>Interactive Regularization Path</h4>
                        <p>Move the slider to see how coefficients evolve with regularization strength:</p>
                        
                        <div style="margin: 1.5rem 0;">
                            <label for="path-lambda">λ (Regularization Strength):</label>
                            <input type="range" id="path-lambda" min="0" max="10" value="0" step="0.1" oninput="updateRegularizationPath()">
                            <div style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                                <span style="font-size: 0.9rem; color: #64748b;">λ = 0.0</span>
                                <span style="font-size: 0.9rem; color: #64748b;" id="path-lambda-value">λ = 0.0</span>
                                <span style="font-size: 0.9rem; color: #64748b;">λ = 10.0</span>
                            </div>
                        </div>
                        
                        <div class="feature-visualization" id="path-features">
                            <!-- Features will be generated by JavaScript -->
                        </div>
                        
                        <div id="path-explanation" style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                            <h5>No Regularization (λ = 0.0)</h5>
                            <p>All features retain their original importance. Risk of overfitting is highest.</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                            <div style="text-align: center; padding: 1rem; background: #fef2f2; border-radius: 8px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #ef4444;" id="features-zero">0</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Features = 0</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #fffbeb; border-radius: 8px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #f59e0b;" id="features-small">10</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Active Features</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: #f0fdf4; border-radius: 8px;">
                                <div style="font-size: 1.2rem; font-weight: bold; color: #22c55e;" id="model-complexity">100%</div>
                                <div style="font-size: 0.9rem; color: #64748b;">Model Complexity</div>
                            </div>
                        </div>
                    </div>

                    <div class="azbn-card">
                        <h3>Choosing the Right λ</h3>
                        <p>The optimal λ balances underfitting and overfitting:</p>
                        
                        <ul>
                            <li><strong>Too Small (λ ≈ 0):</strong> No regularization, potential overfitting</li>
                            <li><strong>Just Right:</strong> Good balance, best validation performance</li>
                            <li><strong>Too Large:</strong> Over-regularization, underfitting</li>
                        </ul>
                        
                        <p><strong>Cross-validation</strong> is typically used to find the optimal λ by testing different values 
                        and choosing the one that gives the best validation performance.</p>
                    </div>
                </div>

                <!-- Applications Section -->
                <div id="applications" class="content-section">
                    <h2>When to Use Each Regularization</h2>
                    <p>
                        Choosing between L1, L2, or no regularization depends on your specific situation 
                        and data characteristics.
                    </p>

                    <div class="use-case-grid">
                        <div class="use-case when-to-use">
                            <h4>Use L1 (Lasso) When:</h4>
                            <ul>
                                <li>You have <strong>many features</strong> (high-dimensional data)</li>
                                <li>You suspect <strong>only some features</strong> are truly important</li>
                                <li>You want <strong>automatic feature selection</strong></li>
                                <li>Model <strong>interpretability</strong> is crucial</li>
                                <li>You're doing <strong>exploratory analysis</strong></li>
                            </ul>
                            <p><strong>Example:</strong> Gene expression data with 20,000 features but only a few are disease-related.</p>
                        </div>
                        
                        <div class="use-case feature-selection">
                            <h4>Use L2 (Ridge) When:</h4>
                            <ul>
                                <li>You believe <strong>most features</strong> contribute to the outcome</li>
                                <li>Features are <strong>highly correlated</strong></li>
                                <li>You want <strong>stable, smooth</strong> predictions</li>
                                <li>You have <strong>multicollinearity</strong> issues</li>
                                <li><strong>Prediction accuracy</strong> is more important than interpretability</li>
                            </ul>
                            <p><strong>Example:</strong> House price prediction where size, location, age, etc. all matter.</p>
                        </div>
                        
                        <div class="use-case stability">
                            <h4>Use Elastic Net When:</h4>
                            <ul>
                                <li>You want <strong>both L1 and L2</strong> benefits</li>
                                <li>You have <strong>groups of correlated features</strong></li>
                                <li>You want some <strong>feature selection + stability</strong></li>
                                <li>You're <strong>unsure</strong> which regularization is better</li>
                            </ul>
                            <p><strong>Formula:</strong> α × L1 + (1-α) × L2</p>
                        </div>
                    </div>

                    <div class="regularization-demo">
                        <h4>Regularization Decision Helper</h4>
                        <p>Answer these questions to get a recommendation:</p>
                        
                        <div style="margin: 1.5rem 0;">
                            <div style="margin: 1rem 0;">
                                <label><strong>How many features do you have?</strong></label>
                                <div class="interactive-selector">
                                    <button class="selector-btn" onclick="updateDecision('features', 'few')">Few (&lt;20)</button>
                                    <button class="selector-btn" onclick="updateDecision('features', 'moderate')">Moderate (20-100)</button>
                                    <button class="selector-btn" onclick="updateDecision('features', 'many')">Many (&gt;100)</button>
                                </div>
                            </div>
                            
                            <div style="margin: 1rem 0;">
                                <label><strong>How important is interpretability?</strong></label>
                                <div class="interactive-selector">
                                    <button class="selector-btn" onclick="updateDecision('interpretability', 'low')">Not Important</button>
                                    <button class="selector-btn" onclick="updateDecision('interpretability', 'moderate')">Somewhat Important</button>
                                    <button class="selector-btn" onclick="updateDecision('interpretability', 'high')">Very Important</button>
                                </div>
                            </div>
                            
                            <div style="margin: 1rem 0;">
                                <label><strong>Are your features correlated?</strong></label>
                                <div class="interactive-selector">
                                    <button class="selector-btn" onclick="updateDecision('correlation', 'low')">Independent</button>
                                    <button class="selector-btn" onclick="updateDecision('correlation', 'moderate')">Some Correlation</button>
                                    <button class="selector-btn" onclick="updateDecision('correlation', 'high')">Highly Correlated</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="scenario-result">
                            <h5 id="decision-title">Make your selections above</h5>
                            <p id="decision-recommendation">Choose the characteristics of your data to get a personalized regularization recommendation.</p>
                        </div>
                    </div>

                    <div class="limitation-box">
                        <h4>Regularization Limitations</h4>
                        <p>While regularization solves many problems, it has its own limitations:</p>
                        <ul>
                            <li><strong>Still Single Models:</strong> Even regularized models are still just one perspective</li>
                            <li><strong>Hyperparameter Tuning:</strong> Finding the right λ requires cross-validation</li>
                            <li><strong>Linear Relationships:</strong> Doesn't help linear models capture non-linear patterns</li>
                            <li><strong>Feature Engineering:</strong> Still requires good feature engineering</li>
                        </ul>
                        <p><strong>This is why we need ensemble methods!</strong> They combine multiple models to overcome these remaining limitations.</p>
                    </div>
                </div>

               <!-- Quiz Section -->
                <div id="quiz" class="content-section">
                    <h2>Chapter 3 Quiz</h2>
                    <p>Test your understanding of regularization techniques:</p>

                    <div class="enhanced-quiz-container" data-quiz-id="chapter3-quiz1">
                        <div class="enhanced-quiz-question">
                            <h4>Question 1: What is the main difference between L1 and L2 regularization?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">L1 is faster to compute than L2</div>
                        <div class="enhanced-quiz-option" data-correct="true">L1 can set coefficients to exactly zero, L2 only shrinks them</div>
                        <div class="enhanced-quiz-option" data-correct="false">L2 is more accurate than L1</div>
                        <div class="enhanced-quiz-option" data-correct="false">There is no practical difference</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Correct!</strong> L1 regularization can drive coefficients to exactly zero (automatic feature selection), while L2 only shrinks coefficients toward zero but never reaches exactly zero.
                        </div>
                     </div>
                     
                     <div class="enhanced-quiz-container" data-quiz-id="chapter3-quiz2">
                        <div class="enhanced-quiz-question">
                            <h4>Question 2: When would you choose L1 regularization over L2?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">When you have very few features</div>
                        <div class="enhanced-quiz-option" data-correct="true">When you have many features and want automatic feature selection</div>
                        <div class="enhanced-quiz-option" data-correct="false">When features are highly correlated</div>
                        <div class="enhanced-quiz-option" data-correct="false">When you want the most stable predictions</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Exactly!</strong> L1 is ideal when you have high-dimensional data with many potentially irrelevant features, as it automatically performs feature selection by setting unimportant coefficients to zero.
                        </div>
                     </div>
                     
                     <div class="enhanced-quiz-container" data-quiz-id="chapter3-quiz3">
                        <div class="enhanced-quiz-question">
                            <h4>Question 3: What problem do regularization techniques NOT solve?</h4>
                        </div>
                        <div class="enhanced-quiz-option" data-correct="false">Overfitting</div>
                        <div class="enhanced-quiz-option" data-correct="false">High variance in predictions</div>
                        <div class="enhanced-quiz-option" data-correct="true">The limitation of having only one model perspective</div>
                        <div class="enhanced-quiz-option" data-correct="false">Feature selection (for L1)</div>
                        <div class="enhanced-quiz-explanation">
                            <strong>Perfect!</strong> Regularization helps with overfitting and variance but doesn't solve the fundamental limitation that you still have only one model. This is why ensemble methods (combining multiple models) are the next logical step!
                        </div>
                     </div>
                </div>

            </div>
        </section>
    </main>
</body>
</html>