<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Prompt Engineering - Large Language Models (LLMs)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/tutorials/llms/llms.css') }}">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWAT2dVgYnHwpIK/NS" crossorigin="anonymous">
    <!-- Prism.js for code syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>


</head>
<body>
    <header class="azbn-header">
        <nav class="azbn-nav">
            <div class="azbn-container">
                <a href="/tutorials/llms" class="course-link">
                    <span>Large Language Models (LLMs)</span>
                </a>
                <div class="azbn-links">
                    <a href="/">Home</a>
                    <a href="/#about">About</a>
                    <a href="/tutorials/">Tutorials</a>
                    <a href="/#projects">Projects</a>
                    <a href="/contact">Contact</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <div class="tutorial-header">
            <div class="azbn-container">
                <h1 class="chapter-title">Chapter 7: Prompt Engineering</h1>
                <p class="chapter-subtitle">Guiding Model Behavior</p>
                
                <div class="chapter-progress">
                    <div class="chapter-progress-fill" data-progress="87"></div>
                </div>
                
                <div class="chapter-navigation">
                    <a href="/tutorials/llms/chapter1" class="chapter-nav-btn ">Chapter 1</a>
                    <a href="/tutorials/llms/chapter2" class="chapter-nav-btn ">Chapter 2</a>
                    <a href="/tutorials/llms/chapter3" class="chapter-nav-btn ">Chapter 3</a>
                    <a href="/tutorials/llms/chapter4" class="chapter-nav-btn ">Chapter 4</a>
                    <a href="/tutorials/llms/chapter5" class="chapter-nav-btn ">Chapter 5</a>
                    <a href="/tutorials/llms/chapter6" class="chapter-nav-btn ">Chapter 6</a>
                    <a href="/tutorials/llms/chapter7" class="chapter-nav-btn active">Chapter 7</a>
                    <a href="/tutorials/llms/chapter8" class="chapter-nav-btn ">Chapter 8</a>
                </div>
                
                <div class="section-progress">
                    <div class="section-progress-fill" data-progress="14.3"></div>
                </div>
                
                <div class="section-nav">
                    <button class="section-nav-btn azbn-btn active" data-section="overview">Overview</button>
                    <button class="section-nav-btn azbn-btn" data-section="concepts">Key Concepts</button>
                    <button class="section-nav-btn azbn-btn" data-section="formulas">Formulas</button>
                    <button class="section-nav-btn azbn-btn" data-section="examples">Examples</button>
                    <button class="section-nav-btn azbn-btn" data-section="implementation">Implementation</button>
                    <button class="section-nav-btn azbn-btn" data-section="applications">Applications</button>
                    <button class="section-nav-btn azbn-btn" data-section="quiz">Quiz</button>
                </div>
            </div>
        </div>

        <section class="azbn-section">
            <div class="azbn-container">
                <div class="learning-objectives-box">
                    <h2>Learning Objectives</h2>
                    <ul>
                        <li>Understand prompt engineering fundamentals</li>
                        <li>Master the mathematical foundations</li>
                        <li>Learn practical implementation</li>
                        <li>Apply knowledge through examples</li>
                        <li>Recognize real-world applications</li>
                    </ul>
                </div>

                <main class="chapter-main-content">
                    <div id="overview" class="content-section active">
                        <h2>Prompt Engineering</h2>
                        
                        <div class="explanation-box">
                            <h3>Introduction</h3>
                            <p><strong>Guiding Model Behavior</strong></p>
                            <p>This chapter provides comprehensive coverage of prompt engineering, including detailed explanations, mathematical formulations, code implementations, and real-world examples.</p>
                        </div>

                        <div class="example-box">
                            <h4>üìö Why This Matters</h4>
                            <p>Understanding prompt engineering is crucial for mastering modern AI systems. This chapter breaks down complex concepts into digestible explanations with step-by-step examples.</p>
                        </div>
                    </div>

                    <div id="concepts" class="content-section">
                        <h2>Key Concepts</h2>
                        
                        <div class="explanation-box">
                            <h3>Prompt Engineering Fundamentals</h3>
                            <p><strong>What is prompt engineering:</strong> Crafting input text to guide LLM behavior and improve performance without modifying model weights.</p>
                            
                            <p><strong>Key principles:</strong></p>
                            <ul>
                                <li><strong>Clarity:</strong> Be specific and unambiguous</li>
                                <li><strong>Context:</strong> Provide relevant background</li>
                                <li><strong>Examples:</strong> Show desired format (few-shot)</li>
                                <li><strong>Structure:</strong> Use clear formatting and organization</li>
                            </ul>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Prompting Strategies</h3>
                            <p><strong>Zero-shot:</strong> Just describe the task. Model uses its pre-trained knowledge.</p>
                            
                            <p><strong>Few-shot:</strong> Provide examples in the prompt. Model learns the pattern from examples.</p>
                            
                            <p><strong>Chain-of-thought:</strong> Ask model to show reasoning steps. Improves complex reasoning tasks.</p>
                            
                            <p><strong>Role-playing:</strong> "Act as a..." helps model adopt specific perspective or expertise.</p>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Prompt Components</h3>
                            <p><strong>Effective prompts include:</strong></p>
                            <ul>
                                <li><strong>Task description:</strong> What you want the model to do</li>
                                <li><strong>Context:</strong> Relevant background information</li>
                                <li><strong>Examples:</strong> Demonstrations of desired behavior</li>
                                <li><strong>Constraints:</strong> Limitations or requirements</li>
                                <li><strong>Output format:</strong> How you want the response structured</li>
                            </ul>
                        </div>
                    </div>

                    <div id="formulas" class="content-section">
                        <h2>Mathematical Formulations</h2>
                        
                        <div class="formula-box">
                            <h4>Prompt-based Prediction</h4>
                            <div class="formula-display">
                                \[P(y | \text{prompt}, x) = P(y | [\text{task\_desc}, \text{examples}, x])\]
                            </div>
                            <div class="formula-explanation">
                                <h5>Where:</h5>
                                <ul>
                                    <li>\(y\): Desired output</li>
                                    <li>\(\text{prompt}\): Crafted input including task description and examples</li>
                                    <li>\(x\): Actual input to process</li>
                                    <li>Model conditions on entire prompt context</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="formula-box">
                            <h4>Few-shot Learning</h4>
                            <div class="formula-display">
                                \[P(y | x, \{(x_i, y_i)\}_{i=1}^{k}) = P(y | [x_1, y_1, \ldots, x_k, y_k, x])\]
                            </div>
                            <div class="formula-explanation">
                                <h5>Where:</h5>
                                <ul>
                                    <li>\(\{(x_i, y_i)\}\): k examples in prompt</li>
                                    <li>Model learns pattern from examples</li>
                                    <li>Applies pattern to new input x</li>
                                    <li>k typically 1-5 examples</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="formula-box">
                            <h4>Chain-of-Thought Prompting</h4>
                            <div class="formula-display">
                                \[P(\text{answer} | \text{question}) = P(\text{reasoning} | \text{question}) \times P(\text{answer} | \text{reasoning})\]
                            </div>
                            <div class="formula-explanation">
                                <p>By explicitly modeling reasoning steps, the model breaks down complex problems into simpler sub-problems, improving accuracy on reasoning tasks.</p>
                            </div>
                        </div>
                    </div>

                    <div id="examples" class="content-section">
                        <h2>Detailed Examples</h2>
                        
                        <div class="example-box">
                            <h4>Example: Zero-shot vs Few-shot</h4>
                            <p><strong>Zero-shot prompt:</strong></p>
                            <pre style="background: #f5f5f5; padding: 1rem; border-radius: 5px;">
Classify the sentiment of this review: "This movie was amazing!"
Sentiment:</pre>
                            
                            <p><strong>Few-shot prompt:</strong></p>
                            <pre style="background: #f5f5f5; padding: 1rem; border-radius: 5px;">
Review: "Great product!"
Sentiment: Positive

Review: "Terrible quality."
Sentiment: Negative

Review: "This movie was amazing!"
Sentiment:</pre>
                            
                            <p><strong>Result:</strong> Few-shot typically performs better as model learns the pattern from examples.</p>
                        </div>
                        
                        <div class="example-box">
                            <h4>Example: Chain-of-Thought</h4>
                            <p><strong>Without CoT:</strong></p>
                            <pre style="background: #f5f5f5; padding: 1rem; border-radius: 5px;">
Q: A store has 15 apples. They sell 6. How many left?
A:</pre>
                            
                            <p><strong>With CoT:</strong></p>
                            <pre style="background: #f5f5f5; padding: 1rem; border-radius: 5px;">
Q: A store has 15 apples. They sell 6. How many left?
A: Let me think step by step.
The store starts with 15 apples.
They sell 6 apples.
So remaining = 15 - 6 = 9 apples.
Therefore, 9 apples are left.</pre>
                            
                            <p><strong>Result:</strong> CoT improves accuracy on math and reasoning problems.</p>
                        </div>
                    </div>

                    <div id="implementation" class="content-section">
                        <h2>Implementation</h2>
                        
                        <div class="code-box">
                            <h4>Few-shot Prompting Function</h4>
                            <pre><code class="language-python">def few_shot_classify(text, examples, model, tokenizer):
    """
    Classify text using few-shot prompting
    """
    # Build prompt with examples
    prompt = ""
    for example_text, example_label in examples:
        prompt += f"Text: {example_text}\nLabel: {example_label}\n\n"
    
    # Add input text
    prompt += f"Text: {text}\nLabel:"
    
    # Generate
    inputs = tokenizer(prompt, return_tensors="pt")
    outputs = model.generate(
        inputs.input_ids,
        max_length=inputs.input_ids.shape[1] + 10,
        temperature=0.3,
        do_sample=True
    )
    
    result = tokenizer.decode(outputs[0], skip_special_tokens=True)
    label = result.split("Label:")[-1].strip()
    return label

# Example usage
examples = [
    ("Great product!", "Positive"),
    ("Terrible quality.", "Negative")
]
text = "This movie was amazing!"
label = few_shot_classify(text, examples, model, tokenizer)
print(label)  # "Positive"</code></pre>
                        </div>
                        
                        <div class="code-box">
                            <h4>Chain-of-Thought Prompting</h4>
                            <pre><code class="language-python">def chain_of_thought_reasoning(question, model, tokenizer):
    """
    Use chain-of-thought prompting for reasoning
    """
    prompt = f"""Q: {question}
A: Let me think step by step.
"""
    
    inputs = tokenizer(prompt, return_tensors="pt")
    outputs = model.generate(
        inputs.input_ids,
        max_length=inputs.input_ids.shape[1] + 200,
        temperature=0.7,
        do_sample=True
    )
    
    result = tokenizer.decode(outputs[0], skip_special_tokens=True)
    reasoning = result.split("A:")[-1].strip()
    return reasoning

# Example
question = "A store has 15 apples. They sell 6. How many left?"
reasoning = chain_of_thought_reasoning(question, model, tokenizer)
print(reasoning)</code></pre>
                        </div>
                    </div>

                    <div id="applications" class="content-section">
                        <h2>Real-World Applications</h2>
                        
                        <div class="explanation-box">
                            <h3>Prompt Engineering in Practice</h3>
                            <p><strong>Chatbot development:</strong></p>
                            <ul>
                                <li>Craft system prompts to define chatbot personality</li>
                                <li>Use few-shot examples to show desired conversation style</li>
                                <li>Iterate on prompts to improve responses</li>
                            </ul>
                            
                            <p><strong>Content generation:</strong></p>
                            <ul>
                                <li>Use role-playing prompts: "Act as a marketing expert..."</li>
                                <li>Provide examples of desired writing style</li>
                                <li>Specify output format and constraints</li>
                            </ul>
                            
                            <p><strong>Task automation:</strong></p>
                            <ul>
                                <li>Format conversion tasks</li>
                                <li>Data extraction from unstructured text</li>
                                <li>Code generation with specific requirements</li>
                            </ul>
                        </div>
                        
                        <div class="explanation-box">
                            <h3>Prompt Engineering Best Practices</h3>
                            <p><strong>Do:</strong></p>
                            <ul>
                                <li>Be specific and clear</li>
                                <li>Provide context and examples</li>
                                <li>Specify output format</li>
                                <li>Test and iterate</li>
                                <li>Use chain-of-thought for complex reasoning</li>
                            </ul>
                            
                            <p><strong>Don't:</strong></p>
                            <ul>
                                <li>Be vague or ambiguous</li>
                                <li>Assume model knows context</li>
                                <li>Use overly complex prompts</li>
                                <li>Ignore prompt injection risks</li>
                            </ul>
                        </div>
                    </div>

                    <div id="quiz" class="content-section">
                        <h2>Test Your Understanding</h2>
                        
                        <div class="quiz-container">
                            <div class="quiz-question">
                                <h3>Question 1: What is the main concept covered in this chapter?</h3>
                                <div class="quiz-option" onclick="checkAnswer(this, true)">A) Prompt Engineering</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">B) Related concept</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">C) Different topic</div>
                                <div class="quiz-option" onclick="checkAnswer(this, false)">D) Unrelated topic</div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </section>
    </main>

    <footer style="background: #f8f9fa; padding: 2rem 0; margin-top: 3rem; border-top: 2px solid #5B7553;">
        <div class="azbn-container" style="text-align: center;">
            <button onclick="scrollToSectionNav()" class="azbn-btn" style="margin: 0.5rem;">
                ‚Üë Back to Section Navigation
            </button>
            <div style="margin-top: 1.5rem;">
                <a href="/tutorials/llms" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Back to Tutorial</a>
                <a href="/tutorials/llms/chapter6" class="azbn-btn azbn-secondary" style="text-decoration: none; margin: 0.5rem;">‚Üê Chapter 6</a>
                <a href="/tutorials/llms/chapter8" class="azbn-btn" style="text-decoration: none; margin: 0.5rem;">Chapter 8 ‚Üí</a>
            </div>
        </div>
    </footer>
    
        <!-- KaTeX for math rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlG8jLC0KXLSyHiQtD6lqG3t3a3H4RbQT6GhhDYFyK4aQo5hk6g/AVC/gw" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/tutorials/llms/shared-tutorial.js') }}"></script>
    <script>
        function scrollToSectionNav() {
            const sectionNav = document.querySelector('.section-nav');
            if (sectionNav) {
                sectionNav.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        function checkAnswer(element, isCorrect) {
            element.parentNode.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            if (isCorrect) {
                element.classList.add('correct');
                element.textContent += ' ‚úì Correct!';
            } else {
                element.classList.add('incorrect');
                element.textContent += ' ‚úó Incorrect';
                const correctOption = Array.from(element.parentNode.querySelectorAll('.quiz-option'))
                    .find(opt => {
                        const onclick = opt.getAttribute('onclick') || '';
                        return onclick.includes('true');
                    });
                if (correctOption && !correctOption.classList.contains('incorrect')) {
                    correctOption.classList.add('correct');
                    correctOption.textContent += ' ‚úì Correct Answer';
                }
            }
        }
            
        // Initialize KaTeX rendering
        document.addEventListener("DOMContentLoaded", function() {
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, {
                    delimiters: [
                        {left: "$$", right: "$$", display: true},
                        {left: "\[", right: "\]", display: true},
                        {left: "$", right: "$", display: false},
                        {left: "\(", right: "\)", display: false}
                    ],
                    throwOnError: false
                });
            }
            
            // Initialize Prism.js syntax highlighting
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>