<!-- Comprehensive Chapter Header Template -->
<!-- Usage: Include this in each chapter with appropriate chapter number and sections -->

<div class="chapter-header">
    <div class="azbn-container">
        <h1 class="chapter-title">Chapter {{ chapter_num }}: {{ chapter_title }}</h1>
        <p class="chapter-subtitle">{{ chapter_subtitle }}</p>
        
        <!-- Chapter Progress Bar -->
        <div class="chapter-progress">
            <div class="chapter-progress-fill" style="width: {{ chapter_progress }}%;"></div>
        </div>
        
        <!-- Chapter Navigation (All 15 chapters) -->
        <div class="chapter-navigation">
            <a href="/tutorials/clustering-course/chapter1" class="chapter-nav-btn {{ 'active' if chapter_num == 1 else '' }}">1</a>
            <a href="/tutorials/clustering-course/chapter2" class="chapter-nav-btn {{ 'active' if chapter_num == 2 else '' }}">2</a>
            <a href="/tutorials/clustering-course/chapter3" class="chapter-nav-btn {{ 'active' if chapter_num == 3 else '' }}">3</a>
            <a href="/tutorials/clustering-course/chapter4" class="chapter-nav-btn {{ 'active' if chapter_num == 4 else '' }}">4</a>
            <a href="/tutorials/clustering-course/chapter5" class="chapter-nav-btn {{ 'active' if chapter_num == 5 else '' }}">5</a>
            <a href="/tutorials/clustering-course/chapter6" class="chapter-nav-btn {{ 'active' if chapter_num == 6 else '' }}">6</a>
            <a href="/tutorials/clustering-course/chapter7" class="chapter-nav-btn {{ 'active' if chapter_num == 7 else '' }}">7</a>
            <a href="/tutorials/clustering-course/chapter8" class="chapter-nav-btn {{ 'active' if chapter_num == 8 else '' }}">8</a>
            <a href="/tutorials/clustering-course/chapter9" class="chapter-nav-btn {{ 'active' if chapter_num == 9 else '' }}">9</a>
            <a href="/tutorials/clustering-course/chapter10" class="chapter-nav-btn {{ 'active' if chapter_num == 10 else '' }}">10</a>
            <a href="/tutorials/clustering-course/chapter11" class="chapter-nav-btn {{ 'active' if chapter_num == 11 else '' }}">11</a>
            <a href="/tutorials/clustering-course/chapter12" class="chapter-nav-btn {{ 'active' if chapter_num == 12 else '' }}">12</a>
            <a href="/tutorials/clustering-course/chapter13" class="chapter-nav-btn {{ 'active' if chapter_num == 13 else '' }}">13</a>
            <a href="/tutorials/clustering-course/chapter14" class="chapter-nav-btn {{ 'active' if chapter_num == 14 else '' }}">14</a>
            <a href="/tutorials/clustering-course/chapter15" class="chapter-nav-btn {{ 'active' if chapter_num == 15 else '' }}">15</a>
        </div>
        
        <!-- Section Progress Bar -->
        <div class="section-progress">
            <div class="section-progress-fill" style="width: {{ section_progress }}%;"></div>
        </div>
        
        <!-- Section Navigation -->
        <div class="section-nav">
            {% for section in sections %}
            <button class="{{ 'active' if loop.first else '' }}" onclick="showSection('{{ section.id }}', this)">{{ section.name }}</button>
            {% endfor %}
        </div>
    </div>
</div>

<script>
// Shared JavaScript for all chapters
function showSection(sectionName, clickedElement) {
    // Hide all sections
    document.querySelectorAll('.section-content').forEach(section => {
        section.classList.remove('active');
    });
    
    // Show selected section
    document.getElementById(sectionName).classList.add('active');
    
    // Update navigation buttons
    document.querySelectorAll('.section-nav button').forEach(button => {
        button.classList.remove('active');
    });
    
    // Add active class to clicked button
    if (clickedElement) {
        clickedElement.classList.add('active');
    }
    
    // Update section progress bar
    updateSectionProgress(sectionName);
}

function updateSectionProgress(sectionName) {
    const sections = {{ sections | map(attribute='id') | list | tojson }};
    const currentIndex = sections.indexOf(sectionName);
    const progress = ((currentIndex + 1) / sections.length) * 100;
    document.querySelector('.section-progress-fill').style.width = progress + '%';
}

// Initialize with first section
window.addEventListener('load', function() {
    const firstSection = document.querySelector('.section-content.active');
    if (firstSection) {
        updateSectionProgress(firstSection.id);
    }
});
</script>
