<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% block meta_description %}{{ site_title }} - Professional AI/ML Engineer and Data Scientist{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}machine learning, artificial intelligence, data science, python, flask, portfolio{% endblock %}">
    <meta name="author" content="Alireza Barzin Zanganeh">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% block og_title %}{{ site_title }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Professional ML Engineer specializing in Machine Learning, Deep Learning, and Data Science{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg') }}">
    
    <title>{% block title %}{{ site_title }}{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/main.css') }}?v=2" rel="stylesheet">
    {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="{{ url_for('index') }}">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" style="height: 40px;">
                    <span class="logo-text"></span>
                    <span class="logo-subtitle">ML/DS</span>
                </a>
            </div>
            
            <div class="nav-menu" id="nav-menu">
                <a href="{{ url_for('index') }}" class="nav-link {% if request.endpoint == 'index' %}active{% endif %}">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="{{ url_for('about') }}" class="nav-link {% if request.endpoint == 'about' %}active{% endif %}">
                    <i class="fas fa-user"></i> About
                </a>
                <a href="{{ url_for('projects') }}" class="nav-link {% if request.endpoint == 'projects' or request.endpoint == 'project_detail' %}active{% endif %}">
                    <i class="fas fa-code"></i> Projects
                </a>
                <a href="{{ url_for('tutorials') }}" class="nav-link {% if request.endpoint == 'tutorials' or request.endpoint == 'tutorial_detail' %}active{% endif %}">
                    <i class="fas fa-book"></i> Tutorials
                </a>
                <a href="{{ url_for('blog') }}" class="nav-link {% if request.endpoint in ['blog', 'blog_post', 'blog_category'] %}active{% endif %}">
                    <i class="fas fa-edit"></i> Blog
                </a>
                <a href="{{ url_for('contact') }}" class="nav-link {% if request.endpoint == 'contact' %}active{% endif %}">
                    <i class="fas fa-envelope"></i> Contact
                </a>
            </div>
            
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}" role="alert">
                            <span class="alert-message">{{ message }}</span>
                            <button type="button" class="alert-close" onclick="this.parentElement.remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Alireza Barzin Zanganeh</h3>
                    <p>ML Engineer & Data Scientist</p>
                    <p>Passionate about creating intelligent solutions through machine learning and data science.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="{{ url_for('projects') }}">Projects</a></li>
                        <li><a href="{{ url_for('tutorials') }}">Tutorials</a></li>
                        <li><a href="{{ url_for('blog') }}">Blog</a></li>
                        <li><a href="{{ url_for('contact') }}">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Connect</h4>
                    <div class="social-links">
                        <a href="{{ social_links.linkedin }}" target="_blank" rel="noopener" aria-label="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="{{ social_links.github }}" target="_blank" rel="noopener" aria-label="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="mailto:{{ social_links.email }}" aria-label="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; {{ current_year }} Alireza Barzin Zanganeh. All rights reserved.</p>
                <p>Built with <i class="fas fa-heart text-red"></i> using Flask and Python</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="back-to-top" aria-label="Back to top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% block extra_js %}{% endblock %}
    
    <!-- Search Modal -->
    <div id="search-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Search</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <input type="text" id="search-input" placeholder="Search tutorials and projects..." autocomplete="off">
                <div id="search-results"></div>
            </div>
        </div>
    </div>
</body>
</html>