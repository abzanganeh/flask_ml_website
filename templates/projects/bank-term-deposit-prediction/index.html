{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/projects/projects.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/projects/bank-term-deposit-prediction.css') }}">
{% endblock %}

{% block content %}
<div class="container project-detail bank-project">
    <!-- Project Header -->
    <div class="project-header">
        <div class="project-header-content">
            <div class="project-info">
                <h1 class="project-title">{{ project.title }}</h1>
                <p class="project-description">{{ project.description }}</p>
                
                <div class="project-meta">
                    <span class="project-category">{{ project.category }}</span>
                    <span class="project-status">Completed</span>
                    <span class="project-duration">2 months</span>
                </div>
                
                <div class="project-links">
                    <a href="{{ project.github_url }}" class="btn btn-outline" target="_blank">
                        <i class="fas fa-code"></i> View Code
                    </a>
                    <a href="{{ project.github_url }}/blob/main/README.md" class="btn btn-primary" target="_blank">
                        <i class="fas fa-book"></i> Documentation
                    </a>
                </div>
            </div>
            
            <div class="project-image">
                <img src="{{ project.default_image_url }}" alt="{{ project.title }}" />
            </div>
        </div>
    </div>

    <!-- Performance Highlights -->
    <div class="performance-highlights">
        <h2><i class="fas fa-trophy"></i> Performance Highlights</h2>
        <div class="metrics-grid">
            <div class="metric-card best">
                <div class="metric-value">60.33%</div>
                <div class="metric-label">Best F1-Score</div>
                <div class="metric-model">XGBoost</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">95.22%</div>
                <div class="metric-label">Best ROC-AUC</div>
                <div class="metric-model">LightGBM Tuned</div>
            </div>
            <div class="metric-card">
                <div class="metric-value">91.90%</div>
                <div class="metric-label">Best Accuracy</div>
                <div class="metric-model">XGBoost Tuned</div>
            </div>
            <div class="metric-card improvement">
                <div class="metric-value">+58%</div>
                <div class="metric-label">F1-Score Improvement</div>
                <div class="metric-model">vs Baseline</div>
            </div>
        </div>
    </div>

    <!-- Business Impact Section -->
    <div class="business-impact">
        <h2><i class="fas fa-chart-line"></i> Business Impact</h2>
        <div class="impact-grid">
            <div class="impact-item">
                <div class="impact-icon"><i class="fas fa-bullseye"></i></div>
                <h3>Marketing Optimization</h3>
                <p>Identifies top 10% of prospects with 70% precision, reducing wasted marketing spend on low-probability customers.</p>
            </div>
            <div class="impact-item">
                <div class="impact-icon"><i class="fas fa-dollar-sign"></i></div>
                <h3>ROI Improvement</h3>
                <p>58% better prediction accuracy leads to improved campaign ROI through targeted outreach and resource optimization.</p>
            </div>
            <div class="impact-item">
                <div class="impact-icon"><i class="fas fa-chart-bar"></i></div>
                <h3>Key Insights</h3>
                <p>Students and retirees show highest subscription rates. March and December are optimal campaign months. Cellular contact outperforms telephone by 15%.</p>
            </div>
        </div>
    </div>

    <!-- Dataset Information -->
    <div class="dataset-info">
        <h2><i class="fas fa-database"></i> Dataset Information</h2>
        <div class="dataset-details">
            <div class="dataset-stat">
                <h3>Source</h3>
                <p>Bank Marketing Campaign Data</p>
            </div>
            <div class="dataset-stat">
                <h3>Size</h3>
                <p>41,188 customers √ó 51 engineered features</p>
            </div>
            <div class="dataset-stat">
                <h3>Target</h3>
                <p>Term deposit subscription (yes/no)</p>
            </div>
            <div class="dataset-stat">
                <h3>Class Distribution</h3>
                <p>88% no subscription, 12% subscription</p>
            </div>
        </div>
        
        <div class="feature-categories">
            <h3>Feature Categories</h3>
            <div class="feature-grid">
                <div class="feature-category">
                    <h4>Demographic</h4>
                    <p>Age, job, marital status, education, default status</p>
                </div>
                <div class="feature-category">
                    <h4>Financial</h4>
                    <p>Housing loan, personal loan status</p>
                </div>
                <div class="feature-category">
                    <h4>Campaign</h4>
                    <p>Contact method, month, day, duration, contacts</p>
                </div>
                <div class="feature-category">
                    <h4>Economic</h4>
                    <p>Employment rate, CPI, confidence index</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Model Performance Comparison -->
    <div class="model-comparison">
        <h2><i class="fas fa-chart-bar"></i> Model Performance Comparison</h2>
        <div class="comparison-table-container">
            <table class="performance-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Model</th>
                        <th>Accuracy</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>F1-Score</th>
                        <th>ROC-AUC</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="best-model">
                        <td>1</td>
                        <td><strong>XGBoost</strong></td>
                        <td>91.75%</td>
                        <td>65.78%</td>
                        <td>55.71%</td>
                        <td><strong>60.33%</strong></td>
                        <td>94.79%</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>LightGBM</td>
                        <td>91.75%</td>
                        <td>66.49%</td>
                        <td>53.88%</td>
                        <td>59.52%</td>
                        <td>95.08%</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Random Forest Tuned</td>
                        <td>91.81%</td>
                        <td>67.35%</td>
                        <td>52.91%</td>
                        <td>59.26%</td>
                        <td>94.94%</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>XGBoost Tuned</td>
                        <td>91.90%</td>
                        <td>69.51%</td>
                        <td>50.11%</td>
                        <td>58.23%</td>
                        <td>95.20%</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>Stacking Ensemble</td>
                        <td>91.89%</td>
                        <td>69.46%</td>
                        <td>50.00%</td>
                        <td>58.15%</td>
                        <td>94.72%</td>
                    </tr>
                    <tr class="baseline">
                        <td>12</td>
                        <td>Naive Bayes (Baseline)</td>
                        <td>87.80%</td>
                        <td>45.99%</td>
                        <td>47.52%</td>
                        <td>46.74%</td>
                        <td>84.36%</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="comparison-highlights">
            <div class="highlight-card">
                <h4>üèÜ Best Overall Performance</h4>
                <p><strong>XGBoost</strong> achieved the highest F1-Score (60.33%) with excellent balance between precision and recall.</p>
            </div>
            <div class="highlight-card">
                <h4>üéØ Best Discrimination</h4>
                <p><strong>LightGBM Tuned</strong> achieved the highest ROC-AUC (95.22%) for probability-based ranking.</p>
            </div>
            <div class="highlight-card">
                <h4>üìà Dramatic Improvement</h4>
                <p><strong>58% better F1-Score</strong> compared to baseline models through advanced techniques.</p>
            </div>
        </div>
    </div>

    <!-- Key Insights -->
    <div class="key-insights">
        <h2><i class="fas fa-lightbulb"></i> Key Insights & Findings</h2>
        
        <div class="insights-grid">
            <div class="insight-section">
                <h3>Data Insights</h3>
                <div class="insight-list">
                    <div class="insight-item">
                        <h4>Class Imbalance</h4>
                        <p>~88% customers do not subscribe to term deposits</p>
                    </div>
                    <div class="insight-item">
                        <h4>High Correlation</h4>
                        <p>Strong correlation between economic indicators</p>
                    </div>
                    <div class="insight-item">
                        <h4>Seasonal Patterns</h4>
                        <p>March and December show higher subscription rates</p>
                    </div>
                    <div class="insight-item">
                        <h4>Contact Method</h4>
                        <p>Cellular contact generally outperforms telephone</p>
                    </div>
                </div>
            </div>
            
            <div class="insight-section">
                <h3>Business Recommendations</h3>
                <div class="recommendation-list">
                    <div class="recommendation-item">
                        <h4>Target Segments</h4>
                        <p>Focus campaigns on students and retired individuals</p>
                    </div>
                    <div class="recommendation-item">
                        <h4>Timing</h4>
                        <p>Schedule major campaigns in March and December</p>
                    </div>
                    <div class="recommendation-item">
                        <h4>Contact Method</h4>
                        <p>Prioritize cellular over telephone contact</p>
                    </div>
                    <div class="recommendation-item">
                        <h4>Previous Success</h4>
                        <p>Heavily weight previous campaign success in targeting</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Technical Architecture -->
    <div class="technical-architecture">
        <h2><i class="fas fa-cogs"></i> Enhanced Technical Pipeline</h2>
        <div class="architecture-steps">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Data Processing</h3>
                <p>Data loading, cleaning, comprehensive EDA with visualizations and data quality validation for 41,188 records.</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Advanced Feature Engineering</h3>
                <p>Creates 51 engineered features, handles multicollinearity, implements categorical encoding, and creates interaction features.</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Multi-Model Training</h3>
                <p>Trains 8 different algorithms: Naive Bayes, Decision Trees, Random Forest, XGBoost, LightGBM, SVM, Logistic Regression.</p>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <h3>Hyperparameter Tuning</h3>
                <p>Automated optimization using Optuna with 20 trials per model, Bayesian optimization for optimal performance.</p>
            </div>
            <div class="step">
                <div class="step-number">5</div>
                <h3>Threshold Optimization</h3>
                <p>Dynamic threshold tuning for each model to achieve optimal F1-scores and precision-recall balance.</p>
            </div>
            <div class="step">
                <div class="step-number">6</div>
                <h3>Model Stacking</h3>
                <p>Voting ensemble combining top 6 performers using soft voting for robust predictions.</p>
            </div>
            <div class="step">
                <div class="step-number">7</div>
                <h3>Comprehensive Evaluation</h3>
                <p>Complete assessment with 9 visualizations, confusion matrices, ROC curves, and calibration analysis.</p>
            </div>
        </div>
    </div>

    <!-- Code Integration -->
    <div class="code-integration">
        <h2><i class="fas fa-code"></i> Key Code Components</h2>
        
        <div class="code-section">
            <h3>Main Pipeline Orchestrator</h3>
            <div class="code-embed">
                <script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fabzanganeh%2Fbank-term-deposit-prediction%2Fblob%2Fmain%2Fsrc%2Fmain.py&style=default&type=code&showBorder=on&showLineNumbers=on&showFileMeta=on&showCopy=on"></script>
            </div>
        </div>

        <div class="code-section">
            <h3>Data Processing Module</h3>
            <div class="code-embed">
                <script src="https://emgithub.com/embed-v2.js?target=https%3A%2F%2Fgithub.com%2Fabzanganeh%2Fbank-term-deposit-prediction%2Fblob%2Fmain%2Fsrc%2Fdata_processing.py&style=default&type=code&showBorder=on&showLineNumbers=on&showFileMeta=on&showCopy=on"></script>
            </div>
        </div>
    </div>

    <!-- Project Structure -->
    <div class="project-structure">
        <h2><i class="fas fa-folder-tree"></i> Project Structure</h2>
        <div class="structure-tree">
            <div class="structure-item">
                <div class="structure-folder">
                    <i class="fas fa-folder"></i> src/
                </div>
                <div class="structure-files">
                    <div class="structure-file"><i class="fas fa-file-code"></i> config.py</div>
                    <div class="structure-file"><i class="fas fa-file-code"></i> data_processing.py</div>
                    <div class="structure-file"><i class="fas fa-file-code"></i> feature_engineering.py</div>
                    <div class="structure-file"><i class="fas fa-file-code"></i> model_training.py</div>
                    <div class="structure-file"><i class="fas fa-file-code"></i> evaluation.py</div>
                    <div class="structure-file"><i class="fas fa-file-code"></i> main.py</div>
                </div>
            </div>
            
            <div class="structure-item">
                <div class="structure-folder">
                    <i class="fas fa-folder"></i> data/
                </div>
                <div class="structure-files">
                    <div class="structure-file"><i class="fas fa-file-csv"></i> bank_data.csv</div>
                </div>
            </div>
            
            <div class="structure-item">
                <div class="structure-folder">
                    <i class="fas fa-folder"></i> models/
                </div>
                <div class="structure-files">
                    <div class="structure-file"><i class="fas fa-file-archive"></i> saved models (.pkl)</div>
                </div>
            </div>
            
            <div class="structure-item">
                <div class="structure-folder">
                    <i class="fas fa-folder"></i> results/
                </div>
                <div class="structure-files">
                    <div class="structure-file"><i class="fas fa-chart-bar"></i> plots and reports</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Technology Stack -->
    <div class="technology-stack">
        <h2><i class="fas fa-tools"></i> Technology Stack</h2>
        <div class="tech-grid">
            {% for tech in project.technology_list %}
            <span class="tech-badge">{{ tech }}</span>
            {% endfor %}
        </div>
    </div>

    <!-- Back Navigation -->
    <div class="back-navigation">
        <a href="{{ url_for('projects') }}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Back to Projects
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Bank Term Deposit Prediction project page loaded');
});
</script>
{% endblock %}
